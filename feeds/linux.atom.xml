<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mozillazg's Blog</title><link href="http://mozillazg.com/" rel="alternate"></link><link href="http://mozillazg.com/feeds/linux.atom.xml" rel="self"></link><id>http://mozillazg.com/</id><updated>2014-06-09T00:00:00+00:00</updated><entry><title>[linux] 修复 Redmine 无法发送通知邮件，提示 550 5.7.1 Unable to relay 的问题</title><link href="http://mozillazg.com/2014/06/linux-fix-redmine-send-mail-error-550-5.7.1-Unable-to-relay.html" rel="alternate"></link><updated>2014-06-09T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2014-06-09:2014/06/linux-fix-redmine-send-mail-error-550-5.7.1-Unable-to-relay.html</id><summary type="html">&lt;p&gt; 前两天接手了公司  Redmine  系统的维护工作 ， 需要写一个安装维护文档 。
 所以我就在本地虚拟机上尝试进行了一下安装 。
 安装后 ， 测试使用的过程中遇到了无法发送通知邮件的问题 ，  日志信息如下 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="n"&gt;occured&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;sending&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="n"&gt;notification&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;550 5.7.1 Unable to relay&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Check&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Redmine  版本 ： 1.2.1&lt;/p&gt;
&lt;p&gt; 最终的解决办法是 ， 修改  config/configuration.yml ， 添加  &lt;code&gt;authentication: :none&lt;/code&gt; :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nl"&gt;default:&lt;/span&gt;
  &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Outgoing&lt;/span&gt; &lt;span class="n"&gt;emails&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;see&lt;/span&gt; &lt;span class="n"&gt;examples&lt;/span&gt; &lt;span class="n"&gt;above&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nl"&gt;email_delivery:&lt;/span&gt;
    &lt;span class="nl"&gt;delivery_method:&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;smtp&lt;/span&gt;
    &lt;span class="nl"&gt;smtp_settings:&lt;/span&gt;
      &lt;span class="nl"&gt;address:&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
      &lt;span class="nl"&gt;port:&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;
      &lt;span class="nl"&gt;domain:&lt;/span&gt; &lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
      &lt;span class="nl"&gt;authentication:&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;none&lt;/span&gt;    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt; 修改项 &lt;/span&gt;
      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;authentication&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;
      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;user_name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;redmine@example.net&amp;quot;&lt;/span&gt;
      &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;redmine&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt; 参考资料 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.redmine.org/boards/2/topics/19732"&gt;Test e-mail works but notifications aren't send - Redmine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://community.bitnami.com/t/notification-emails-not-sent-but-test-emails-do-work/2186/2"&gt;Notification Emails not sent, but test emails do work - Bitnami Community&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.redmine.org/boards/2/topics/30851"&gt;Redmine 2.0: error sending email&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="redmine"></category></entry><entry><title>[linux]配置 vsftp 启用被动模式（passive mode）解决客户端"no route to host"错误</title><link href="http://mozillazg.com/2014/05/linux-configure-vsftp-enable-passive-mode.html" rel="alternate"></link><updated>2014-05-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2014-05-20:2014/05/linux-configure-vsftp-enable-passive-mode.html</id><summary type="html">&lt;p&gt; 系统 : CentOS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt; 修改  vsftpd.conf， 启用被动模式 ， 指定端口 :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="n"&gt;pasv_min_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12000&lt;/span&gt;
&lt;span class="n"&gt;pasv_max_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12199&lt;/span&gt;
&lt;span class="n"&gt;pasv_enable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;YES&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt; 配置防火墙  iptables， 允许端口访问 :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="n"&gt;iptables&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt; &lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dport&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;12199&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;ACCEPT&lt;/span&gt;
&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;iptables&lt;/span&gt; &lt;span class="n"&gt;save&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt; 参考资料 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://serverfault.com/questions/421161/how-to-configure-vsftpd-to-work-with-passive-mode"&gt;centos - How to configure vsftpd to work with passive mode - Server Fault &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://unix.stackexchange.com/questions/58291/how-to-check-the-passive-and-active-ftp"&gt;How to check the Passive and Active FTP - Unix &amp;amp; Linux Stack Exchange &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="vsftp"></category></entry><entry><title>[linux]修复 gcc 编译时的出现的 "CPU you selected does not support x86-64 instruction set" 错误</title><link href="http://mozillazg.com/2014/05/linux-fix-gcc-error-CPU-you-selected-does-not-support-x86-64-instruction-set.html" rel="alternate"></link><updated>2014-05-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2014-05-20:2014/05/linux-fix-gcc-error-CPU-you-selected-does-not-support-x86-64-instruction-set.html</id><summary type="html">&lt;p&gt; 前两天在服务器上安装  &lt;code&gt;gevent&lt;/code&gt;  时出现了  &lt;code&gt;gevent/gevent.core.c:1: error: CPU you selected does not support x86-64 instruction set&lt;/code&gt;  错误 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;gevent&lt;/span&gt;
&lt;span class="n"&gt;Downloading&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;unpacking&lt;/span&gt; &lt;span class="n"&gt;gevent&lt;/span&gt;
  &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;egg_info&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;package&lt;/span&gt; &lt;span class="n"&gt;gevent&lt;/span&gt;
    &lt;span class="p"&gt;....&lt;/span&gt;

    &lt;span class="n"&gt;building&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;extension&lt;/span&gt;
    &lt;span class="n"&gt;gcc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pthread&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DNDEBUG&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;O2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wall&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;D_FORTIFY_SOURCE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fexceptions&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fstack&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;protector&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;param&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ssp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m64&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mtune&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;generic&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;D_GNU_SOURCE&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fPIC&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fwrapv&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;O2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mcpu&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i686&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;march&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i686&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fPIC&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DLIBEV_EMBED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DEV_COMMON&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DEV_CLEANUP_ENABLE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DEV_EMBED_ENABLE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DEV_PERIODIC_ENABLE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Ibuild&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.6&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;libev&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Ilibev&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python2&lt;/span&gt;&lt;span class="mf"&gt;.6&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2.6&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;

    &lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gevent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;selected&lt;/span&gt; &lt;span class="n"&gt;does&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;support&lt;/span&gt; &lt;span class="n"&gt;x86&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt; &lt;span class="n"&gt;instruction&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;

    &lt;span class="nl"&gt;error:&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;gcc&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="p"&gt;....&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 最后使用的解决方法是设置一下环境变量  &lt;code&gt;CFLAGS&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;march&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x86&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;gevent&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt; 参考资料 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://unix.stackexchange.com/questions/82089/pip-install-cpu-you-selected-does-not-support-x86-64-instruction-set"&gt;Pip install - CPU you selected does not support x86-64 instruction set&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]无法启动 rabbitmq-server，出现 timeout 错误</title><link href="http://mozillazg.com/2013/10/linux-RabbitMQ-server-can-not-start-with-host-timeout-error.html" rel="alternate"></link><updated>2013-10-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-10-20:2013/10/linux-RabbitMQ-server-can-not-start-with-host-timeout-error.html</id><summary type="html">&lt;p&gt; 上次安装  rabbitmq  时 ， 有台服务器上  &lt;code&gt;service rabbitmq-server start&lt;/code&gt;  总是起不来 。
 错误日志里出现如下错误 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;epmd&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourhostname&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;timeout&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xxxxx&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 解决办法就是 ,  修改  /etc/hosts  将本机的  hostname  加进去 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="mf"&gt;127.0.0.1&lt;/span&gt;    &lt;span class="n"&gt;yourhostname&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt; 参考 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.rabbitmq.com/ec2.html#issues-hostname"&gt;RabbitMQ - Amazon EC2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/jch/2522701"&gt;Troubleshooting RabbitMQ installation on OSX via homebrew&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://forum.sourcefabric.org/discussion/comment/13783"&gt;rabbitmq-server starting.... TIMEOUT - Airtime Support Discussions on Sourcefabric Forum&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]bash 下 ; &amp;&amp; || 的区别</title><link href="http://mozillazg.com/2013/09/linux-bash-run-mutil-cmd.html" rel="alternate"></link><updated>2013-09-28T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-09-28:2013/09/linux-bash-run-mutil-cmd.html</id><summary type="html">&lt;p&gt;linux  中  bash  下执行多个命令时 ，; &amp;amp;&amp;amp; ||  操作符的区别 ：&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="27%" /&gt;
&lt;col width="73%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;cmd1 ; cmd2&lt;/td&gt;
&lt;td&gt;cmd1  和  cmd2 &lt;strong&gt; 都会 &lt;/strong&gt;  被执行 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;cmd1 &amp;amp;&amp;amp; cmd2&lt;/td&gt;
&lt;td&gt; 如果  cmd1  执行  &lt;strong&gt; 成功 &lt;/strong&gt;  则执行  cmd2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;cmd1 || cmd2&lt;/td&gt;
&lt;td&gt; 如果  cmd1  执行  &lt;strong&gt; 失败 &lt;/strong&gt;  则执行  cmd2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt; 参考 &lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://superuser.com/questions/619016/what-is-the-difference-between-command-command-and-command-command"&gt;linux - what is the difference between &amp;quot;command &amp;amp;&amp;amp; command&amp;quot; and &amp;quot;command ; command&amp;quot; - Super User&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="linux"></category><category term="bash"></category><category term="shell"></category></entry><entry><title>[linux]创建指定大小的文件</title><link href="http://mozillazg.com/2013/08/linux-create-a-file-with-given-size.html" rel="alternate"></link><updated>2013-08-03T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-08-03:2013/08/linux-create-a-file-with-given-size.html</id><summary type="html">&lt;p&gt; 比如创建  10M  大小的文件 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#  创建大小为  10M  的文件 ：abc.exe&lt;/span&gt;
&lt;span class="n"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;abc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt; &lt;span class="n"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;

&lt;span class="cp"&gt;#  只生成属性为  10M  大小的文件 ， 但不占用实际硬盘空间 &lt;/span&gt;
&lt;span class="n"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;abc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt; &lt;span class="n"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt; &lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt; 参考 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://rubyer.me/blog/196/"&gt;Linux 生成指定大小文件的方法 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]修复 GPG key retrieval failed: [Errno 14] Could not open/read file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag</title><link href="http://mozillazg.com/2013/08/linux-gpg-key-retrieval-failed-errno-14.html" rel="alternate"></link><updated>2013-08-02T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-08-02:2013/08/linux-gpg-key-retrieval-failed-errno-14.html</id><summary type="html">&lt;p&gt; 两种方法 ：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt; 编辑  &lt;code&gt;/etc/yum/etc/yum.repos.d/rpmforge.repo&lt;/code&gt;， 更改  &lt;code&gt;gpgcheck=0&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_1"&gt; 参考 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://easylinuxalways.blogspot.jp/2013/04/gpg-key-retrieval-failed.html"&gt;GPG key retrieval failed&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="rpmforge"></category></entry><entry><title>[linux]screen 常用命令</title><link href="http://mozillazg.com/2013/05/linux-screen-command.html" rel="alternate"></link><updated>2013-05-16T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-05-16:2013/05/linux-screen-command.html</id><summary type="html">&lt;p&gt; 通过  screen  命令可以让终端命令在我们断开远程服务器后依旧运行而不会中断 。&lt;/p&gt;
&lt;h2 id="screen"&gt; 安装  screen  命令 &lt;/h2&gt;
&lt;p&gt;redhat/centos:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;yum install screen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ubuntu:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;sudo apt-get install screen
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="screen_1"&gt; 常用的  screen  命令 &lt;/h2&gt;
&lt;p&gt; 新建一个名为  django  的  screen shell：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;screen -S django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 新建一个名为  django  的后台  screen shell：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;screen -dS django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 查看所有的  screen shell:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;screen -ls
There are screens on:
    1429.django &lt;span class="o"&gt;(&lt;/span&gt;Detached&lt;span class="o"&gt;)&lt;/span&gt;
    23264.abc   &lt;span class="o"&gt;(&lt;/span&gt;Detached&lt;span class="o"&gt;)&lt;/span&gt;
2 Sockets in /var/run/screen/S-abc.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 打开后台状态为  Detached  且名称为  django  的  screen shell:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;screen -r django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 将当前  screen shell  转到后台 （Detached）， 按快捷键 : &lt;code&gt;Ctrl + a + d&lt;/code&gt;&lt;/p&gt;
&lt;p&gt; 打开后台状态为  Attached  且名称为  django  的  screen shell:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;screen -r django
There is a screen on:
    1429.django &lt;span class="o"&gt;(&lt;/span&gt;Attached&lt;span class="o"&gt;)&lt;/span&gt;
There is no screen to be resumed matching django.
&lt;span class="nv"&gt;$ &lt;/span&gt;screen -x django
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="screen"></category></entry><entry><title>[linux]编译 aria2c 时，出现 C compiler cannot create executables 错误</title><link href="http://mozillazg.com/2013/05/linux-compile-aria2c-error-C-compiler-cannot-create-executables.html" rel="alternate"></link><updated>2013-05-11T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-05-11:2013/05/linux-compile-aria2c-error-C-compiler-cannot-create-executables.html</id><summary type="html">&lt;p&gt; 编译安装  aria2c  时 ， 出现了如下错误 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt;
&lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;
&lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="n"&gt;whether&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="n"&gt;compiler&lt;/span&gt; &lt;span class="n"&gt;works&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt;
&lt;span class="nl"&gt;configure:&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="nl"&gt;configure:&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="n"&gt;compiler&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;executables&lt;/span&gt;
&lt;span class="n"&gt;See&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;details&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 解决办法 ：  清空  LIBS  及  CFLAGS  变量的值 &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;export&lt;/span&gt; &lt;span class="n"&gt;LIBS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; 
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;export&lt;/span&gt; &lt;span class="n"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;aria2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.17.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt;
&lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;
&lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="n"&gt;whether&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="n"&gt;compiler&lt;/span&gt; &lt;span class="n"&gt;works&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category></entry><entry><title>[linux]解决 sendmail 错误： FEATURE() should be before MAILER()</title><link href="http://mozillazg.com/2013/02/linux-fix-sendmail-configuration-error-feature-should-be-before-mailer.html" rel="alternate"></link><updated>2013-02-22T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-02-22:2013/02/linux-fix-sendmail-configuration-error-feature-should-be-before-mailer.html</id><summary type="html">&lt;p&gt; 错误详情 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; m4 /etc/mail/sendmail.mc &amp;gt; /etc/mail/sendmail.cf
&lt;span class="go"&gt;*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;span class="go"&gt;*** MAILER(`local&amp;#39;) must appear after FEATURE(`always_add_domain&amp;#39;)*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;span class="go"&gt;*** MAILER(`local&amp;#39;) must appear after FEATURE(`allmasquerade&amp;#39;)*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 解决办法 ：&lt;/p&gt;
&lt;p&gt; 按照提示 ， 编辑  /etc/mail/sendmail.mc  文件 ， 将  FEATURE()  放到  MAILER()  之前 ：&lt;/p&gt;
&lt;p&gt; 更改 &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;dnl #
dnl # Default Mailer setup
MAILER_DEFINITIONS
MAILER(`local&amp;#39;)dnl
MAILER(`smtp&amp;#39;)dnl

dnl # Masquerading options
FEATURE(`always_add_domain&amp;#39;)dnl
MASQUERADE_AS(`tumblr.3sd.me&amp;#39;)dnl
FEATURE(`allmasquerade&amp;#39;)dnl
FEATURE(`masquerade_envelope&amp;#39;)dnl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 为 &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;dnl #

dnl # Masquerading options
FEATURE(`always_add_domain&amp;#39;)dnl
MASQUERADE_AS(`tumblr.3sd.me&amp;#39;)dnl
FEATURE(`allmasquerade&amp;#39;)dnl
FEATURE(`masquerade_envelope&amp;#39;)dnl

dnl # Default Mailer setup
MAILER_DEFINITIONS
MAILER(`local&amp;#39;)dnl
MAILER(`smtp&amp;#39;)dnl
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="ubuntu"></category><category term="sendmail"></category></entry><entry><title>[linux] 更改 ssh 私钥 Passphrase</title><link href="http://mozillazg.com/2013/01/linux-ssh-change-passphrase.html" rel="alternate"></link><updated>2013-01-31T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-01-31:2013/01/linux-ssh-change-passphrase.html</id><summary type="html">&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh
&lt;span class="gp"&gt;$&lt;/span&gt; ssh-keygen -f id_rsa -p
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt; 参考 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cyberciti.biz/faq/howto-ssh-changing-passphrase/"&gt;OpenSSH Change a Passphrase With ssh-keygen command&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="ssh"></category></entry><entry><title>[linux]入手 VPS 后首先该做的事情</title><link href="http://mozillazg.com/2013/01/linux-vps-first-things-need-to-do.html" rel="alternate"></link><updated>2013-01-10T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-01-10:2013/01/linux-vps-first-things-need-to-do.html</id><summary type="html">&lt;p&gt; 本文将介绍入手  VPS  后首先该做的一些事情 。&lt;/p&gt;
&lt;p&gt; 本文推荐使用  Xshell  作为  Windows  下的  SSH  客户端 。&lt;/p&gt;
&lt;h2 id="root"&gt; 更改  root  用户密码 &lt;/h2&gt;
&lt;p&gt; 使用  root  登录  ssh  后 ，&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="go"&gt;Xshell:\&amp;gt; ssh root@192.168.1.2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 首先要做的事情就是更改  root  密码 ， 密码记得要复杂点 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; passwd
&lt;span class="go"&gt;Enter new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;Retype new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;passwd: password updated successfully&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 修改完密码之后可以断开  ssh  重新使用  root  登录验证一下密码 。&lt;/p&gt;
&lt;h2 id="_1"&gt; 创建普通用户 &lt;/h2&gt;
&lt;p&gt; 为了安全 ， 平时我们应该以普通用户的身份操作  VPS。 所以需要创建一个普通用户 。&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; useradd -m hello
&lt;span class="gp"&gt;#&lt;/span&gt; passwd hello
&lt;span class="go"&gt;Enter new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;Retype new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;passwd: password updated successfully&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 给用户添加  sudo  命令的使用权限 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\nhello ALL=(ALL) ALL\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sudoers
&lt;span class="gp"&gt;#&lt;/span&gt; tail -3 /etc/sudoers

&lt;span class="go"&gt;hello ALL=(ALL) ALL&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 如果不想每次使用  &lt;code&gt;sudo&lt;/code&gt;  都输入  root  密码 ， 上面的命令修改为 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\nhello ALL=(ALL) NOPASSWD:ALL\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sudoers
&lt;span class="gp"&gt;#&lt;/span&gt; tail -3 /etc/sudoers

&lt;span class="go"&gt;hello ALL=(ALL) NOPASSWD:ALL&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="ssh-vps"&gt; 使用  SSH  密匙认证登录  VPS&lt;/h2&gt;
&lt;p&gt; 为了安全与方便 ， 需要使用  SSH  密匙认证的方式来登录  VPS 。&lt;/p&gt;
&lt;p&gt; 首先切换到普通用户下 ，&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; sudo su -l hello
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 如果出现  sudo: unable to resolve host xxx  错误 :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt; 查看  hostname:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; head /etc/hostname
&lt;span class="go"&gt;ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt; 修改文件  /etc/hosts， 增加一行内容  &lt;code&gt;127.0.0.1 hostname&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n127.0.0.1 ubuntu\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/hosts
&lt;span class="gp"&gt;#&lt;/span&gt; tail -3 /etc/hosts

&lt;span class="go"&gt;127.0.0.1 ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt; 生成密钥 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; ssh-keygen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 一路回车 。&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh 
&lt;span class="gp"&gt;$&lt;/span&gt; cat id_rsa.pub &amp;gt;&amp;gt; authorized_keys
&lt;span class="gp"&gt;$&lt;/span&gt; ls 
&lt;span class="go"&gt;authorized_keys  id_rsa  id_rsa.pub&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; chmod 600 authorized_keys
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;id_rsa  文件就是客户端用来登录的私钥了 ， 下面我们要把他从服务器上下载下来 。&lt;/p&gt;
&lt;p&gt; 点击  Xshell  导航栏的 “new file transfer”  图标 ， 进入一个终端界面后 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /home/hello/.ssh
&lt;span class="gp"&gt;$&lt;/span&gt; get id_rsa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 此时  id_rsa  文件已经在  Xshell  的安装目录下了 。 然后再配置  xshell  使用密钥登录即可 。&lt;/p&gt;
&lt;h2 id="root_1"&gt; 禁用  root  登录及密码认证登录 &lt;/h2&gt;
&lt;p&gt; 为了安全起见 ， 我们需要配置  SSH  从而达到禁用  root  登录及密码认证登录的目的 。&lt;/p&gt;
&lt;p&gt; 在进行下面的配置前你需要再三确认可以通过上面生成的密钥以普通用户的身份登录  VPS， 并且  root  密码正确无误的记下来了 。&lt;/p&gt;
&lt;p&gt; 编辑  ssh  服务器端配置文件 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/ssh/sshd_config
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 将  26  行左右的  &lt;code&gt;PermitRootLogin yes&lt;/code&gt;  改为  &lt;code&gt;PermitRootLogin no&lt;/code&gt; ，     &lt;br /&gt;
50  行左右的  &lt;code&gt;#PasswordAuthentication yes&lt;/code&gt;  改为  &lt;code&gt;PasswordAuthentication no&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt; 重启  ssh  服务 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo service sshd restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_2"&gt; 配置防火墙 &lt;/h2&gt;
&lt;p&gt; 下面将使用  iptables  作为服务器的防火墙 ， 如果服务器没有安装的话需要先安装  iptables。&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install iptables             &lt;span class="c"&gt;# ubuntu&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; yum install iptables                      &lt;span class="c"&gt;# centos&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 对于  centos/redhat：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/sysconfig/iptables

&lt;span class="gp"&gt;#&lt;/span&gt; Firewall configuration written by system-config-firewall
&lt;span class="gp"&gt;#&lt;/span&gt; Manual customization of this file is not recommended.
&lt;span class="go"&gt;*filter&lt;/span&gt;
&lt;span class="go"&gt;:INPUT ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;:FORWARD ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;:OUTPUT ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -p icmp -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -i lo -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -j REJECT --reject-with icmp-host-prohibited&lt;/span&gt;
&lt;span class="go"&gt;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -j DROP&lt;/span&gt;
&lt;span class="go"&gt;COMMIT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ubuntu：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/iptables.up.rules  &lt;span class="c"&gt;#  添加上面的规则 &lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo vim /etc/network/interfaces
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 在   'iface lo inet loopback'  后增加一行  pre-up iptables-restore &amp;lt; /etc/iptables.up.rules&lt;/p&gt;
&lt;p&gt; 应用防火墙规则 ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo service iptables restart  &lt;span class="c"&gt;# centos&lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo iptables-restore &amp;lt; /etc/iptables.up.rules   &lt;span class="c"&gt;# ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; 开机启动  iptables ：&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo chkconfig iptables on  &lt;span class="c"&gt;# redhat/centos&lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install sysv-rc-conf  &lt;span class="c"&gt;# ubuntu&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; sudo sysv-rc-conf iptables on    &lt;span class="c"&gt;# ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_3"&gt; 参考 &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://matrix.42qu.com/10728837"&gt;Linux :  大三学生的作品 - 42qu.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.linode.com/wiki/index.php/Configuring_IPtables_on_ubuntu_server"&gt;Configuring IPtables on ubuntu server - LinodeWiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://docs.kolab.org/en-US/Kolab_Groupware/3.0/html/Community_Installation_Guide/chap-Community_Installation_Guide-Preparing_the_System.html#sect-Community_Installation_Guide-Preparing_the_System-System_Firewall"&gt;Chapter 1. Preparing the System&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="vps"></category><category term="ssh"></category><category term="iptables"></category><category term="ubuntu"></category><category term="centos"></category></entry></feed>