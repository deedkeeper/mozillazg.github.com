<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Huang Huang 的博客</title><link href="http://127.0.0.1:8000/" rel="alternate"></link><link href="http://127.0.0.1:8000/feeds/linux.atom.xml" rel="self"></link><id>http://127.0.0.1:8000/</id><updated>2016-04-17T00:00:00+00:00</updated><entry><title>如何在 centos 7 上编译 boost</title><link href="http://127.0.0.1:8000/2016/04/linux-how-to-build-boost.python-on-centos7.md.html" rel="alternate"></link><updated>2016-04-17T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2016-04-17:2016/04/linux-how-to-build-boost.python-on-centos7.md.html</id><summary type="html">&lt;p&gt;本文主要记录一下如何在 centos 7 上编译 boost 库，同时也适用于 ubuntu（安装系统包的命令需要改为 &lt;code&gt;apt-get&lt;/code&gt;）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;安装编译工具 &lt;code&gt;clang&lt;/code&gt; ，也可以使用 &lt;code&gt;gcc&lt;/code&gt; 代替，只需要将下面命令中的 &lt;code&gt;clang&lt;/code&gt; 替换为 &lt;code&gt;gcc&lt;/code&gt; 即可&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum install clang
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载 boost: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载 boost_1_60_0.tar.gz( &lt;a href="http://sourceforge.net/projects/boost/files/boost/1.60.0/"&gt;http://sourceforge.net/projects/boost/files/boost/1.60.0/&lt;/a&gt; )&lt;/li&gt;
&lt;li&gt;解压: &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mv boost_1_60_0.tar.gz /opt/
cd /opt/
tar zxvf boost_1_60_0.tar.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编译 boost（同时编译所有的 boost lib， &lt;strong&gt;内存和 CPU 如果不够的话可能会编译失败甚至导致系统死机&lt;/strong&gt; ）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd boost_1_60_0/
# 可以通过 ./bootstrap.sh --help 查看更多选项
./bootstrap.sh  --with-toolset=clang --with-libraries=all
./b2
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编译安装 boost.build&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd toos/build/
./bootstrap.sh  --with-toolset=clang
./b2
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置 ld&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;echo &amp;quot;/opt/boost_1_60_0/stage/lib&amp;quot; &amp;gt;&amp;gt; /etc/ld.so.conf
ldconfig
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要记下的几个路径，代码编译的时候可能会用到&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* boost 目录: `/opt/boost_1_60_0/`
* lib 目录:  `/opt/boost_1_60_0/stage/lib`
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;参考资料:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.boost.org/doc/libs/1_60_0/more/getting_started/unix-variants.html"&gt;Boost Getting Started on Unix Variants - 1.60.0&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="boost"></category><category term="python"></category><category term="c++"></category></entry><entry><title>使用 wireshark 查看 tcpdump 的抓包结果</title><link href="http://127.0.0.1:8000/2015/05/open-tcpdump-result-with-wireshark-gui.html" rel="alternate"></link><updated>2015-05-10T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2015-05-10:2015/05/open-tcpdump-result-with-wireshark-gui.html</id><summary type="html">&lt;p&gt;本文将讲解如何使用 wireshark 查看 tcpdump 的抓包结果&lt;/p&gt;
&lt;h2&gt;保存 tcpdump 抓包结果&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo tcpdump -i eth0 -w dump.pcap
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; 指定要抓取的网卡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w&lt;/code&gt; 指定结果保存位置&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo tcpdump -i eth0 -w dump.pcap -v
tcpdump: listening on eth0, link-type EN10MB &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;, capture size &lt;span class="m"&gt;65535&lt;/span&gt; bytes
Got 15
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;-v&lt;/code&gt; 主要是为了得到 &lt;code&gt;Got 15&lt;/code&gt; 这个数，当想要停止的时候，按下 &lt;code&gt;ctrl + c&lt;/code&gt; 就可以了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo tcpdump -i eth0 -w dump.pcap -v
tcpdump: listening on eth0, link-type EN10MB &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;, capture size &lt;span class="m"&gt;65535&lt;/span&gt; bytes
^C71 packets captured
&lt;span class="m"&gt;71&lt;/span&gt; packets received by filter
&lt;span class="m"&gt;0&lt;/span&gt; packets dropped by kernel
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后用 &lt;code&gt;sz&lt;/code&gt; 命令或其他方式把 dump.pcap 文件下载到本地：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sz dump.pcap
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;在 wireshark 中打开&lt;/h2&gt;
&lt;p&gt;【file】—【open】选中 dump.pcap 文件就可以查看抓包结果了。&lt;/p&gt;
&lt;p&gt;&lt;img alt="open.png" src="/static/images/tcpdump-wireshark/open.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="open2.png" src="/static/images/tcpdump-wireshark/open2.png" /&gt;&lt;/p&gt;
&lt;p&gt;顺便说一个查看 http 请求和响应的方法:&lt;/p&gt;
&lt;p&gt;&lt;img alt="view-http.png" src="/static/images/tcpdump-wireshark/view-http.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="http.png" src="/static/images/tcpdump-wireshark/http.png" /&gt;&lt;/p&gt;
&lt;h2&gt;其他 tcpdump 技巧&lt;/h2&gt;
&lt;p&gt;过滤 http 请求和响应:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo tcpdump -i eth0 host 3sd.me and port 80 -v
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;过滤 GET 请求:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo tcpdump -i eth0 host 3sd.me and port 80 and &amp;#39;tcp[((tcp[12:1] &amp;amp; 0xf0) &amp;gt;&amp;gt; 2):4] = 0x47455420&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;过滤 POST 请求：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo tcpdump -i eth0 host 3sd.me and port 80 and &amp;#39;tcp dst port 80 and (tcp[((tcp[12:1] &amp;amp; 0xf0) &amp;gt;&amp;gt; 2):4] = 0x504f5354)&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用 &lt;code&gt;-A&lt;/code&gt; 参数使返回值人类可读&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo tcpdump -i eth0 -A host 3sd.me and port &lt;span class="m"&gt;80&lt;/span&gt; and &lt;span class="s1"&gt;&amp;#39;tcp[((tcp[12:1] &amp;amp; 0xf0) &amp;gt;&amp;gt; 2):4] = 0x47455420&amp;#39;&lt;/span&gt;
tcpdump: verbose output suppressed, use -v or -vv &lt;span class="k"&gt;for&lt;/span&gt; full protocol decode
listening on eth0, link-type EN10MB &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;, capture size &lt;span class="m"&gt;65535&lt;/span&gt; bytes
18:41:59.219052 IP xxx.xxx.xxx.xxxx &amp;gt; 3sd.me.http: Flags &lt;span class="o"&gt;[&lt;/span&gt;P.&lt;span class="o"&gt;]&lt;/span&gt;, seq 2875869606:2875869979, ack 2796606839, win 64240, length 373
E.....@.r..Gh..j..P....P.jI....wP....7..GET /JbVGP HTTP/1.1
Host: 3sd.me
Connection: Keep-Alive
User-Agent: Mozilla/5.0 &lt;span class="o"&gt;(&lt;/span&gt;Macintosh&lt;span class="p"&gt;;&lt;/span&gt; Intel Mac OS X 10.9&lt;span class="p"&gt;;&lt;/span&gt; rv:35.0&lt;span class="o"&gt;)&lt;/span&gt; Gecko/20100101 Firefox/35.0
Accept: text/html, application/xml&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;q&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nv"&gt;q&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0.1
Accept-Language: en
Accept-Encoding: gzip, deflate
Referer: http://3sd.me/
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.wireshark.org/CaptureFilters"&gt;https://wiki.wireshark.org/CaptureFilters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.wireshark.org/docs/wsug_html_chunked/AppToolstcpdump.html"&gt;https://www.wireshark.org/docs/wsug_html_chunked/AppToolstcpdump.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.wireshark.org/tools/string-cf.html"&gt;https://www.wireshark.org/tools/string-cf.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sites.google.com/site/jimmyxu101/testing/use-tcpdump-to-monitor-http-traffic"&gt;https://sites.google.com/site/jimmyxu101/testing/use-tcpdump-to-monitor-http-traffic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/4777042/can-i-use-tcpdump-to-get-http-requests-response-header-and-response-body"&gt;http://stackoverflow.com/questions/4777042/can-i-use-tcpdump-to-get-http-requests-response-header-and-response-body&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.wireshark.org/tools/string-cf.html
http://askubuntu.com/questions/252179/how-to-inspect-outgoing-http-requests-of-a-single-application"&gt;https://www.wireshark.org/tools/string-cf.html
http://askubuntu.com/questions/252179/how-to-inspect-outgoing-http-requests-of-a-single-application&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="tcpdump"></category><category term="wireshark"></category></entry><entry><title>[linx]解决编译 hping 时出现 "undefined reference to `hping_script'" 错误</title><link href="http://127.0.0.1:8000/2015/03/linux-centos5-build-hping-error-undefined-reference-to-hping_script.html" rel="alternate"></link><updated>2015-03-08T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2015-03-08:2015/03/linux-centos5-build-hping-error-undefined-reference-to-hping_script.html</id><summary type="html">&lt;p&gt;错误信息如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo make
...
pd.o -L/usr/local/lib -lpcap  -ltcl8.4.threads -lm -lpthread
main.o: In &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;main&lt;span class="s1"&gt;&amp;#39;:&lt;/span&gt;
&lt;span class="s1"&gt;/xxx/main.c:186: undefined reference to `hping_script&amp;#39;&lt;/span&gt;
collect2: ld returned &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; status
make: *** &lt;span class="o"&gt;[&lt;/span&gt;hping3&lt;span class="o"&gt;]&lt;/span&gt; Error 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解决: 执行 &lt;code&gt;make clean&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo make clean
rm -rf hping3 *.o libars.a
$ sudo make
...
This binary is TCL scripting capable
use &lt;span class="sb"&gt;`&lt;/span&gt;make strip&lt;span class="s1"&gt;&amp;#39; to strip hping3 binary&lt;/span&gt;
&lt;span class="s1"&gt;use `make install&amp;#39;&lt;/span&gt; to install hping3
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://wiki.hping.org/20"&gt;http://wiki.hping.org/20&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>[linux]查看通过 yum 安装的包的文件安装位置</title><link href="http://127.0.0.1:8000/2015/02/linux-find-files-from-installed-yum-package.html" rel="alternate"></link><updated>2015-02-28T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2015-02-28:2015/02/linux-find-files-from-installed-yum-package.html</id><summary type="html">&lt;p&gt;可以通过 &lt;code&gt;yum-utils&lt;/code&gt; 工具查看所安装的包的文件位置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo yum install yum-utils
$ sudo repoquery --list python27
/usr/bin/pydoc27
/usr/bin/python2.7
/usr/share/doc/python27-2.7.9
/usr/share/doc/python27-2.7.9/LICENSE
/usr/share/doc/python27-2.7.9/README
/usr/share/man/man1/python2.1.gz
/usr/share/man/man1/python2.7.1.gz
&lt;/pre&gt;&lt;/div&gt;</summary><category term="yum"></category></entry><entry><title>[linux] centos 下安装 snmpwalk 命令</title><link href="http://127.0.0.1:8000/2014/12/linux-install-snmpwalk-command-on-centos.html" rel="alternate"></link><updated>2014-12-11T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-12-11:2014/12/linux-install-snmpwalk-command-on-centos.html</id><summary type="html">&lt;p&gt;&lt;code&gt;snmpwalk&lt;/code&gt; 命令可以用来探测交换机端口的实时带宽情况。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# yum provides */snmpwalk
yum install net-snmp-utils
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>[linux]退出码 127 含义</title><link href="http://127.0.0.1:8000/2014/12/linux-what-is-mean-exit-code-127.html" rel="alternate"></link><updated>2014-12-11T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-12-11:2014/12/linux-what-is-mean-exit-code-127.html</id><summary type="html">&lt;p&gt;在 bash 下退出码 &lt;code&gt;127&lt;/code&gt; 的含义是 &lt;strong&gt;命令不存在&lt;/strong&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ foo
未找到 &lt;span class="s1"&gt;&amp;#39;foo&amp;#39;&lt;/span&gt; 命令，您要输入的是否是：
 命令 &lt;span class="s1"&gt;&amp;#39;fog&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;ruby-fog&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;fox&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;objcryst-fox&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;xoo&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;xoo&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;fgo&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;fgo&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;fio&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;fio&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;fop&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;fop&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;main&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;goo&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;goo&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
 命令 &lt;span class="s1"&gt;&amp;#39;zoo&amp;#39;&lt;/span&gt; 来自于包 &lt;span class="s1"&gt;&amp;#39;zoo&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;universe&lt;span class="o"&gt;)&lt;/span&gt;
foo：未找到命令
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt;
127
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>[linux]常用的 CentOS 5/6/7 yum 源</title><link href="http://127.0.0.1:8000/2014/11/linux-recommended-centos-5-6-7-yum-source.html" rel="alternate"></link><updated>2014-11-23T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-11-23:2014/11/linux-recommended-centos-5-6-7-yum-source.html</id><summary type="html">&lt;p&gt;下面是一些常用的 CentOS yum 源。&lt;/p&gt;
&lt;h2&gt;rpmforge&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# centos 5 i386
rpm -Uvh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el5.rf.i386.rpm
# centos 5 x86_64
rpm -Uvh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el5.rf.x86_64.rpm

# centos 6 i686
rpm -Uvh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.i686.
# centos 6 x86_64
rpm -Uvh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm

# centos 7
rpm -Uvh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el7.rf.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;epel&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# centos 5 i386
rpm -Uvh http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm
# centos 5 x86_64
rpm -Uvh http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm

# centos 6 i386
rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
# centos 6 x86_64
rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm

# centos 7
rpm -Uvh http://download.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-5.noarch.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;remi&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# centos 5
rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-5.rpm
# centos 6
rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm
# centos 7
rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;vim /etc/yum.repos.d/remi.repo&lt;/code&gt; 更改 &lt;code&gt;enabled=1&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;ius&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# centos 5 i386
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/CentOS/5/i386/ius-release-1.0-13.ius.centos5.noarch.rpm
# centos 5 x86_64
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/CentOS/5/x86_64/epel-release-5-4.noarch.rpm

# centos 6 i386
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/CentOS/6/i386/ius-release-1.0-13.ius.centos6.noarch.rpm
# centos 6 x86_64
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/CentOS/6/x86_64/ius-release-1.0-13.ius.centos6.noarch.rpm

# centos 7
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/CentOS/7/x86_64/ius-release-1.0-14.ius.centos7.noarch.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;!-- yum install centos-release-SCL --&gt;</summary></entry><entry><title>[linux]修复执行 make 命令时，提示：warning: Clock skew detected，导致无法执行 make 命令的问题</title><link href="http://127.0.0.1:8000/2014/11/linux-fix-make-warning-Clock-skew-detected.html" rel="alternate"></link><updated>2014-11-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-11-20:2014/11/linux-fix-make-warning-Clock-skew-detected.html</id><summary type="html">&lt;p&gt;有时，执行 &lt;code&gt;make&lt;/code&gt; 命令时会出现如下提示：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;make&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Clock&lt;/span&gt; &lt;span class="n"&gt;skew&lt;/span&gt; &lt;span class="n"&gt;detected&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Your&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt; &lt;span class="n"&gt;may&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;incomplete&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;导致无法执行 &lt;code&gt;make&lt;/code&gt; 命令。&lt;/p&gt;
&lt;p&gt;出现这个提示的原因是因为 Makefile 的修改时间大于系统的当前时间。
比如把本机的 Makefile 文件上传到服务器上时，而服务器上的时间比本机时间要慢，就会出现这种情况。&lt;/p&gt;
&lt;p&gt;有两种解决办法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;同步本地时间和服务器时间。&lt;/li&gt;
&lt;li&gt;在服务器上通过 touch 命令修改 Makefile 文件的修改时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/3824500/compling-c-on-remote-linux-machine-clock-skew-detected-warning"&gt;Compling C++ on remote Linux machine - "clock skew detected" warning - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>[linux] 修复 Redmine 无法发送通知邮件，提示 550 5.7.1 Unable to relay 的问题</title><link href="http://127.0.0.1:8000/2014/06/linux-fix-redmine-send-mail-error-550-5.7.1-Unable-to-relay.html" rel="alternate"></link><updated>2014-06-09T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-06-09:2014/06/linux-fix-redmine-send-mail-error-550-5.7.1-Unable-to-relay.html</id><summary type="html">&lt;p&gt;前两天接手了公司 Redmine 系统的维护工作，需要写一个安装维护文档。
所以我就在本地虚拟机上尝试进行了一下安装。
安装后，测试使用的过程中遇到了无法发送通知邮件的问题， 日志信息如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;The following error occured while sending email notification:
&amp;quot;550 5.7.1 Unable to relay&amp;quot;.
Check your configuration in config/configuration.yml.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Redmine 版本： 1.2.1&lt;/p&gt;
&lt;p&gt;最终的解决办法是，修改 config/configuration.yml ，添加 &lt;code&gt;authentication: :none&lt;/code&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: domain.com
      port: 25
      domain: domain.com
      authentication: :none    # 修改项
      # authentication: :login
      # user_name: &amp;quot;redmine@example.net&amp;quot;
      # password: &amp;quot;redmine&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.redmine.org/boards/2/topics/19732"&gt;Test e-mail works but notifications aren't send - Redmine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://community.bitnami.com/t/notification-emails-not-sent-but-test-emails-do-work/2186/2"&gt;Notification Emails not sent, but test emails do work - Bitnami Community&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.redmine.org/boards/2/topics/30851"&gt;Redmine 2.0: error sending email&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="redmine"></category></entry><entry><title>[linux]配置 vsftp 启用被动模式（passive mode）解决客户端"no route to host"错误</title><link href="http://127.0.0.1:8000/2014/05/linux-configure-vsftp-enable-passive-mode.html" rel="alternate"></link><updated>2014-05-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-05-20:2014/05/linux-configure-vsftp-enable-passive-mode.html</id><summary type="html">&lt;p&gt;系统: CentOS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;修改 vsftpd.conf，启用被动模式，指定端口:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pasv_min_port=12000
pasv_max_port=12199
pasv_enable=YES
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置防火墙 iptables，允许端口访问:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;iptables -I INPUT -p tcp --dport 12000:12199 -j ACCEPT
service iptables save
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://serverfault.com/questions/421161/how-to-configure-vsftpd-to-work-with-passive-mode"&gt;centos - How to configure vsftpd to work with passive mode - Server Fault &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://unix.stackexchange.com/questions/58291/how-to-check-the-passive-and-active-ftp"&gt;How to check the Passive and Active FTP - Unix &amp;amp; Linux Stack Exchange &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="vsftp"></category></entry><entry><title>[linux]修复 gcc 编译时的出现的 "CPU you selected does not support x86-64 instruction set" 错误</title><link href="http://127.0.0.1:8000/2014/05/linux-fix-gcc-error-CPU-you-selected-does-not-support-x86-64-instruction-set.html" rel="alternate"></link><updated>2014-05-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2014-05-20:2014/05/linux-fix-gcc-error-CPU-you-selected-does-not-support-x86-64-instruction-set.html</id><summary type="html">&lt;p&gt;前两天在服务器上安装 &lt;code&gt;gevent&lt;/code&gt; 时出现了 &lt;code&gt;gevent/gevent.core.c:1: error: CPU you selected does not support x86-64 instruction set&lt;/code&gt; 错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install gevent
Downloading/unpacking gevent
  Running setup.py egg_info &lt;span class="k"&gt;for&lt;/span&gt; package gevent
    ....

    building &lt;span class="s1"&gt;&amp;#39;gevent.core&amp;#39;&lt;/span&gt; extension
    gcc -pthread -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; -fexceptions -fstack-protector --param&lt;span class="o"&gt;=&lt;/span&gt;ssp-buffer-size&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; -m64 -mtune&lt;span class="o"&gt;=&lt;/span&gt;generic -D_GNU_SOURCE -fPIC -fwrapv -O2 -mcpu&lt;span class="o"&gt;=&lt;/span&gt;i686 -march&lt;span class="o"&gt;=&lt;/span&gt;i686 -fPIC -DLIBEV_EMBED&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; -DEV_COMMON&lt;span class="o"&gt;=&lt;/span&gt; -DEV_CLEANUP_ENABLE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; -DEV_EMBED_ENABLE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; -DEV_PERIODIC_ENABLE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; -Ibuild/temp.linux-x86_64-2.6/libev -Ilibev -I/usr/include/python2.6 -c gevent/gevent.core.c -o build/temp.linux-x86_64-2.6/gevent/gevent.core.o

    gevent/gevent.core.c:1: error: CPU you selected does not support x86-64 instruction &lt;span class="nb"&gt;set&lt;/span&gt;

    error: &lt;span class="nb"&gt;command&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;gcc&amp;#39;&lt;/span&gt; failed with &lt;span class="nb"&gt;exit&lt;/span&gt; status 1

    ....
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;最后使用的解决方法是设置一下环境变量 &lt;code&gt;CFLAGS&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-march=x86-64&amp;#39;&lt;/span&gt;
$ pip install gevent
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://unix.stackexchange.com/questions/82089/pip-install-cpu-you-selected-does-not-support-x86-64-instruction-set"&gt;Pip install - CPU you selected does not support x86-64 instruction set&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]无法启动 rabbitmq-server，出现 timeout 错误</title><link href="http://127.0.0.1:8000/2013/10/linux-RabbitMQ-server-can-not-start-with-host-timeout-error.html" rel="alternate"></link><updated>2013-10-20T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-10-20:2013/10/linux-RabbitMQ-server-can-not-start-with-host-timeout-error.html</id><summary type="html">&lt;p&gt;上次安装 rabbitmq 时，有台服务器上 &lt;code&gt;service rabbitmq-server start&lt;/code&gt; 总是起不来。
错误日志里出现如下错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;epmd&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yourhostname&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;timeout&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xxxxx&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解决办法就是, 修改 /etc/hosts 将本机的 hostname 加进去：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;127.0.0.1    yourhostname
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.rabbitmq.com/ec2.html#issues-hostname"&gt;RabbitMQ - Amazon EC2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/jch/2522701"&gt;Troubleshooting RabbitMQ installation on OSX via homebrew&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://forum.sourcefabric.org/discussion/comment/13783"&gt;rabbitmq-server starting.... TIMEOUT - Airtime Support Discussions on Sourcefabric Forum&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]bash 下 ; &amp;&amp; || 的区别</title><link href="http://127.0.0.1:8000/2013/09/linux-bash-run-mutil-cmd.html" rel="alternate"></link><updated>2013-09-28T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-09-28:2013/09/linux-bash-run-mutil-cmd.html</id><summary type="html">&lt;p&gt;linux 中 bash 下执行多个命令时，; &amp;amp;&amp;amp; || 操作符的区别：&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="27%" /&gt;
&lt;col width="73%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;cmd1 ; cmd2&lt;/td&gt;
&lt;td&gt;cmd1 和 cmd2 &lt;strong&gt;都会&lt;/strong&gt; 被执行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;cmd1 &amp;amp;&amp;amp; cmd2&lt;/td&gt;
&lt;td&gt;如果 cmd1 执行 &lt;strong&gt;成功&lt;/strong&gt; 则执行 cmd2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;cmd1 || cmd2&lt;/td&gt;
&lt;td&gt;如果 cmd1 执行 &lt;strong&gt;失败&lt;/strong&gt; 则执行 cmd2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2 id="hidid1"&gt;参考&lt;a class="headerlink" href="#hidid1" title="Permalink to this headline"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://superuser.com/questions/619016/what-is-the-difference-between-command-command-and-command-command"&gt;linux - what is the difference between &amp;quot;command &amp;amp;&amp;amp; command&amp;quot; and &amp;quot;command ; command&amp;quot; - Super User&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="linux"></category><category term="bash"></category><category term="shell"></category></entry><entry><title>[linux]创建指定大小的文件</title><link href="http://127.0.0.1:8000/2013/08/linux-create-a-file-with-given-size.html" rel="alternate"></link><updated>2013-08-03T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-08-03:2013/08/linux-create-a-file-with-given-size.html</id><summary type="html">&lt;p&gt;比如创建 10M 大小的文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 创建大小为 10M 的文件：abc.exe&lt;/span&gt;
dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/zero &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;abc.exe &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1M &lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;10

&lt;span class="c1"&gt;# 只生成属性为 10M 大小的文件，但不占用实际硬盘空间&lt;/span&gt;
dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/zero &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;abc.exe &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1M &lt;span class="nv"&gt;seek&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://rubyer.me/blog/196/"&gt;Linux生成指定大小文件的方法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category></entry><entry><title>[linux]修复 GPG key retrieval failed: [Errno 14] Could not open/read file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag</title><link href="http://127.0.0.1:8000/2013/08/linux-gpg-key-retrieval-failed-errno-14.html" rel="alternate"></link><updated>2013-08-02T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-08-02:2013/08/linux-gpg-key-retrieval-failed-errno-14.html</id><summary type="html">&lt;p&gt;两种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/yum/etc/yum.repos.d/rpmforge.repo&lt;/code&gt;，更改 &lt;code&gt;gpgcheck=0&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://easylinuxalways.blogspot.jp/2013/04/gpg-key-retrieval-failed.html"&gt;GPG key retrieval failed&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="rpmforge"></category></entry><entry><title>[linux]screen 常用命令</title><link href="http://127.0.0.1:8000/2013/05/linux-screen-command.html" rel="alternate"></link><updated>2013-05-16T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-05-16:2013/05/linux-screen-command.html</id><summary type="html">&lt;p&gt;通过 screen 命令可以让终端命令在我们断开远程服务器后依旧运行而不会中断。&lt;/p&gt;
&lt;h2&gt;安装 screen 命令&lt;/h2&gt;
&lt;p&gt;redhat/centos:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum install screen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ubuntu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install screen
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;常用的 screen 命令&lt;/h2&gt;
&lt;p&gt;新建一个名为 django 的 screen shell：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;screen -S django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;新建一个名为 django 的后台 screen shell：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;screen -dS django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查看所有的 screen shell:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ screen -ls
There are screens on:
    1429.django &lt;span class="o"&gt;(&lt;/span&gt;Detached&lt;span class="o"&gt;)&lt;/span&gt;
    23264.abc   &lt;span class="o"&gt;(&lt;/span&gt;Detached&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="m"&gt;2&lt;/span&gt; Sockets in /var/run/screen/S-abc.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;打开后台状态为 Detached 且名称为 django 的 screen shell:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ screen -r django
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将当前 screen shell 转到后台（Detached），按快捷键: &lt;code&gt;Ctrl + a + d&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;打开后台状态为 Attached 且名称为 django 的 screen shell:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ screen -r django
There is a screen on:
    1429.django &lt;span class="o"&gt;(&lt;/span&gt;Attached&lt;span class="o"&gt;)&lt;/span&gt;
There is no screen to be resumed matching django.
$ screen -x django
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="screen"></category></entry><entry><title>[linux]编译 aria2c 时，出现 C compiler cannot create executables 错误</title><link href="http://127.0.0.1:8000/2013/05/linux-compile-aria2c-error-C-compiler-cannot-create-executables.html" rel="alternate"></link><updated>2013-05-11T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-05-11:2013/05/linux-compile-aria2c-error-C-compiler-cannot-create-executables.html</id><summary type="html">&lt;p&gt;编译安装 aria2c 时，出现了如下错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@dev aria2-1.17.1]# ./configure
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/root/temp/aria2-1.17.1&amp;#39;:
configure: error: C compiler cannot create executables
See `config.log&amp;#39; for more details
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解决办法： 清空 LIBS 及 CFLAGS 变量的值&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@dev aria2-1.17.1]# export LIBS=
[root@dev aria2-1.17.1]# 
[root@dev aria2-1.17.1]# export CFLAGS=
[root@dev aria2-1.17.1]# ./configure
checking for gcc... gcc
checking whether the C compiler works... yes
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category></entry><entry><title>[linux]解决 sendmail 错误： FEATURE() should be before MAILER()</title><link href="http://127.0.0.1:8000/2013/02/linux-fix-sendmail-configuration-error-feature-should-be-before-mailer.html" rel="alternate"></link><updated>2013-02-22T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-02-22:2013/02/linux-fix-sendmail-configuration-error-feature-should-be-before-mailer.html</id><summary type="html">&lt;p&gt;错误详情：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; m4 /etc/mail/sendmail.mc &amp;gt; /etc/mail/sendmail.cf
&lt;span class="go"&gt;*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;span class="go"&gt;*** MAILER(`local&amp;#39;) must appear after FEATURE(`always_add_domain&amp;#39;)*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;span class="go"&gt;*** MAILER(`local&amp;#39;) must appear after FEATURE(`allmasquerade&amp;#39;)*** ERROR: FEATURE() should be before MAILER()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解决办法：&lt;/p&gt;
&lt;p&gt;按照提示，编辑 /etc/mail/sendmail.mc 文件，将 FEATURE() 放到 MAILER() 之前：&lt;/p&gt;
&lt;p&gt;更改&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dnl #
dnl # Default Mailer setup
MAILER_DEFINITIONS
MAILER(`local&amp;#39;)dnl
MAILER(`smtp&amp;#39;)dnl

dnl # Masquerading options
FEATURE(`always_add_domain&amp;#39;)dnl
MASQUERADE_AS(`tumblr.3sd.me&amp;#39;)dnl
FEATURE(`allmasquerade&amp;#39;)dnl
FEATURE(`masquerade_envelope&amp;#39;)dnl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dnl #

dnl # Masquerading options
FEATURE(`always_add_domain&amp;#39;)dnl
MASQUERADE_AS(`tumblr.3sd.me&amp;#39;)dnl
FEATURE(`allmasquerade&amp;#39;)dnl
FEATURE(`masquerade_envelope&amp;#39;)dnl

dnl # Default Mailer setup
MAILER_DEFINITIONS
MAILER(`local&amp;#39;)dnl
MAILER(`smtp&amp;#39;)dnl
&lt;/pre&gt;&lt;/div&gt;</summary><category term="linux"></category><category term="ubuntu"></category><category term="sendmail"></category></entry><entry><title>[linux] 更改 ssh 私钥 Passphrase</title><link href="http://127.0.0.1:8000/2013/01/linux-ssh-change-passphrase.html" rel="alternate"></link><updated>2013-01-31T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-01-31:2013/01/linux-ssh-change-passphrase.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh
&lt;span class="gp"&gt;$&lt;/span&gt; ssh-keygen -f id_rsa -p
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cyberciti.biz/faq/howto-ssh-changing-passphrase/"&gt;OpenSSH Change a Passphrase With ssh-keygen command&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="ssh"></category></entry><entry><title>[linux]入手 VPS 后首先该做的事情</title><link href="http://127.0.0.1:8000/2013/01/linux-vps-first-things-need-to-do.html" rel="alternate"></link><updated>2013-01-10T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:127.0.0.1:8000,2013-01-10:2013/01/linux-vps-first-things-need-to-do.html</id><summary type="html">&lt;p&gt;本文将介绍入手 VPS 后首先该做的一些事情。&lt;/p&gt;
&lt;p&gt;本文推荐使用 Xshell 作为 Windows 下的 SSH 客户端。&lt;/p&gt;
&lt;h2&gt;更改 root 用户密码&lt;/h2&gt;
&lt;p&gt;使用 root 登录 ssh 后，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;Xshell:\&amp;gt; ssh root@192.168.1.2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;首先要做的事情就是更改 root 密码，密码记得要复杂点：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; passwd
&lt;span class="go"&gt;Enter new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;Retype new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;passwd: password updated successfully&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改完密码之后可以断开 ssh 重新使用 root 登录验证一下密码。&lt;/p&gt;
&lt;h2&gt;创建普通用户&lt;/h2&gt;
&lt;p&gt;为了安全，平时我们应该以普通用户的身份操作 VPS。所以需要创建一个普通用户。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; useradd -m hello
&lt;span class="gp"&gt;#&lt;/span&gt; passwd hello
&lt;span class="go"&gt;Enter new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;Retype new UNIX password: &lt;/span&gt;
&lt;span class="go"&gt;passwd: password updated successfully&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;给用户添加 sudo 命令的使用权限：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\nhello ALL=(ALL) ALL\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sudoers
&lt;span class="gp"&gt;#&lt;/span&gt; tail -3 /etc/sudoers

&lt;span class="go"&gt;hello ALL=(ALL) ALL&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--
如果不想每次使用 `sudo` 都输入 root 密码，上面的命令修改为：

    :::console
    # echo -e "\nhello ALL=(ALL) NOPASSWD:ALL\n" &gt;&gt; /etc/sudoers
    # tail -3 /etc/sudoers

    hello ALL=(ALL) NOPASSWD:ALL
--&gt;

&lt;h2&gt;使用 SSH 密匙认证登录 VPS&lt;/h2&gt;
&lt;p&gt;为了安全与方便，需要使用 SSH 密匙认证的方式来登录 VPS 。&lt;/p&gt;
&lt;p&gt;首先切换到普通用户下，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; sudo su -l hello
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果出现 sudo: unable to resolve host xxx 错误:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;查看 hostname:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; head /etc/hostname
&lt;span class="go"&gt;ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改文件 /etc/hosts，增加一行内容 &lt;code&gt;127.0.0.1 hostname&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n127.0.0.1 ubuntu\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/hosts
&lt;span class="gp"&gt;#&lt;/span&gt; tail -3 /etc/hosts

&lt;span class="go"&gt;127.0.0.1 ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;生成密钥（可选，可以使用本地已有的公钥，把公钥内容追加到 ~/.ssh/authorized_keys 里就可以了）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; ssh-keygen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;一路回车。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh 
&lt;span class="gp"&gt;$&lt;/span&gt; cat id_rsa.pub &amp;gt;&amp;gt; authorized_keys
&lt;span class="gp"&gt;$&lt;/span&gt; ls 
&lt;span class="go"&gt;authorized_keys  id_rsa  id_rsa.pub&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; chmod &lt;span class="m"&gt;600&lt;/span&gt; authorized_keys
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;id_rsa 文件就是客户端用来登录的私钥了，下面我们要把他从服务器上下载下来。&lt;/p&gt;
&lt;p&gt;点击 Xshell 导航栏的“new file transfer” 图标，进入一个终端界面后：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /home/hello/.ssh
&lt;span class="gp"&gt;$&lt;/span&gt; get id_rsa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;此时 id_rsa 文件已经在 Xshell 的安装目录下了。然后再配置 xshell 使用密钥登录即可。&lt;/p&gt;
&lt;h2&gt;禁用 root 登录及密码认证登录&lt;/h2&gt;
&lt;p&gt;为了安全起见，我们需要配置 SSH 从而达到禁用 root 登录及密码认证登录的目的。&lt;/p&gt;
&lt;p&gt;在进行下面的配置前你需要再三确认可以通过上面生成的密钥以普通用户的身份登录 VPS，并且 root 密码正确无误的记下来了。&lt;/p&gt;
&lt;p&gt;编辑 sshd 服务器端配置文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/ssh/sshd_config
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将 26 行左右的 &lt;code&gt;#PermitRootLogin yes&lt;/code&gt; 改为 &lt;code&gt;PermitRootLogin no&lt;/code&gt; ，     &lt;br /&gt;
50 行左右的 &lt;code&gt;#PasswordAuthentication yes&lt;/code&gt; 改为 &lt;code&gt;PasswordAuthentication no&lt;/code&gt;。                 &lt;br /&gt;
修改端口, 将 &lt;code&gt;#Port 22&lt;/code&gt; 改为 &lt;code&gt;Port 端口号数字&lt;/code&gt;(比如： &lt;code&gt;Port 7564&lt;/code&gt;)。&lt;/p&gt;
&lt;p&gt;重启 ssh 服务：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo service sshd restart
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;配置防火墙&lt;/h2&gt;
&lt;p&gt;下面将使用 iptables 作为服务器的防火墙，如果服务器没有安装的话需要先安装 iptables。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install iptables             &lt;span class="c1"&gt;# ubuntu&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; yum install iptables                      &lt;span class="c1"&gt;# centos&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;对于 centos/redhat（适用 centos 5, centos 6）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/sysconfig/iptables

&lt;span class="gp"&gt;#&lt;/span&gt; Firewall configuration written by system-config-firewall
&lt;span class="gp"&gt;#&lt;/span&gt; Manual customization of this file is not recommended.
&lt;span class="go"&gt;*filter&lt;/span&gt;
&lt;span class="go"&gt;:INPUT ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;:FORWARD ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;:OUTPUT ACCEPT [0:0]&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -p icmp -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -i lo -j ACCEPT&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT   # 如果有修改 sshd 服务端口号，改为修改后的数字&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -j REJECT --reject-with icmp-host-prohibited&lt;/span&gt;
&lt;span class="go"&gt;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&lt;/span&gt;
&lt;span class="go"&gt;-A INPUT -j DROP&lt;/span&gt;
&lt;span class="go"&gt;COMMIT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ubuntu：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo vi /etc/iptables.up.rules  &lt;span class="c1"&gt;# 添加上面的规则&lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo vim /etc/network/interfaces
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在  'iface lo inet loopback' 后增加一行 pre-up iptables-restore &amp;lt; /etc/iptables.up.rules&lt;/p&gt;
&lt;p&gt;应用防火墙规则：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo service iptables restart  &lt;span class="c1"&gt;# centos  5, 6&lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo iptables-restore &amp;lt; /etc/iptables.up.rules   &lt;span class="c1"&gt;# ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;开机启动 iptables ：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo chkconfig iptables on  &lt;span class="c1"&gt;# redhat/centos  5, 6&lt;/span&gt;

&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install sysv-rc-conf  &lt;span class="c1"&gt;# ubuntu&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; sudo sysv-rc-conf iptables on    &lt;span class="c1"&gt;# ubuntu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://matrix.42qu.com/10728837"&gt;Linux : 大三学生的作品- 42qu.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.linode.com/wiki/index.php/Configuring_IPtables_on_ubuntu_server"&gt;Configuring IPtables on ubuntu server - LinodeWiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://docs.kolab.org/en-US/Kolab_Groupware/3.0/html/Community_Installation_Guide/chap-Community_Installation_Guide-Preparing_the_System.html#sect-Community_Installation_Guide-Preparing_the_System-System_Firewall"&gt;Chapter 1. Preparing the System&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="vps"></category><category term="ssh"></category><category term="iptables"></category><category term="ubuntu"></category><category term="centos"></category></entry></feed>