<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mozillazg's Blog</title><link href="http://mozillazg.com/" rel="alternate"></link><link href="http://mozillazg.com/feeds/git.atom.xml" rel="self"></link><id>http://mozillazg.com/</id><updated>2015-08-16T00:00:00+00:00</updated><entry><title>如何撤销第一次提交的 git commit</title><link href="http://mozillazg.com/2015/08/ru-he-che-xiao-di-ci-ti-jiao-de-git-commit.html" rel="alternate"></link><updated>2015-08-16T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2015-08-16:2015/08/ru-he-che-xiao-di-ci-ti-jiao-de-git-commit.html</id><summary type="html">&lt;p&gt;可以通过如下命令撤销创建仓库后第一次提交的 commit&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ref&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;HEAD&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://stackoverflow.com/questions/6632191/how-to-revert-initial-git-commit&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>在 CentOS 6 上编译安装 git 2.x</title><link href="http://mozillazg.com/2015/08/install-git-2-on-centos-6.html" rel="alternate"></link><updated>2015-08-15T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2015-08-15:2015/08/install-git-2-on-centos-6.html</id><summary type="html">&lt;p&gt;CentOS 6 上通过 yum 安装的是 git 1.x 版本，
本文将讲述如何在 CentOS 6 上编译安装 git 2.x 。下面是详细步骤:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;安装编译所需的环境依赖&lt;/p&gt;
&lt;p&gt;sudo yum -y install wget curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-ExtUtils-MakeMaker gcc asciidoc xmlto docbook2x&lt;/p&gt;
&lt;h1 id="binsh-line-1-docbook2x-texi-command-not-found"&gt;解决编译时出现的 /bin/sh: line 1: docbook2x-texi: command not found&lt;/h1&gt;
&lt;p&gt;ln -s /usr/bin/db2x_docbook2texi /usr/bin/docbook2x-texi&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载 &lt;a href="https://www.kernel.org/pub/software/scm/git/"&gt;git 2.x 源码包&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;cd /tmp
wget https://www.kernel.org/pub/software/scm/git/git-2.5.0.tar.gz&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;解压，编译，安装&lt;/p&gt;
&lt;p&gt;cd /tmp
tar zxvf git-2.5.0.tar.gz 
cd git-2.5.0/
make configure
./configure --prefix=/usr/local
make all doc info
make install install-doc install-html install-info&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置 &lt;code&gt;PATH&lt;/code&gt; 环境变量&lt;/p&gt;
&lt;p&gt;echo 'export PATH=/usr/local/bin:$PATH' &amp;gt;&amp;gt; ~/.bashrc
source ~/.bashrc&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;;)&lt;/p&gt;
&lt;p&gt;$ git --version
git version 2.5.0&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_1"&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git"&gt;Git - Installing Git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>[git]如何删除在远程已被删除的本地分支（清理本地分支）</title><link href="http://mozillazg.com/2014/02/git-delete-all-local-branches-which-are-remotely-deleted.html" rel="alternate"></link><updated>2014-02-12T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2014-02-12:2014/02/git-delete-all-local-branches-which-are-remotely-deleted.html</id><summary type="html">&lt;p&gt;通过 &lt;tt class="docutils literal"&gt;git fetch &lt;span class="pre"&gt;-p&lt;/span&gt;&lt;/tt&gt; 命令可以实现清理本地分支的功能:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git fetch -p
 x [deleted]         (none)     -&amp;gt; origin/feature-xxx
 x [deleted]         (none)     -&amp;gt; origin/feature-xxxx
 x [deleted]         (none)     -&amp;gt; origin/feature-xxxxx
 x [deleted]         (none)     -&amp;gt; origin/hotfix-xx

# 然后再执行
$ git branch -r | awk '{print $1}' | egrep -v -f /dev/fd/0 &amp;lt;(git branch -vv | grep origin) | awk '{print $1}' | xargs git branch -d
 已删除分支 feature-xxx（曾为 328b639）。
 已删除分支 feature-xxxx（曾为 5e77d10）。
 已删除分支 hotfix-xx（曾为 5c13813）。
&lt;/pre&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/1072171/how-do-you-remove-an-invalid-remote-branch-reference-from-git"&gt;How do you remove an invalid remote branch reference from Git? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/13064613/git-how-to-prune-local-tracking-branches-that-do-not-exist-on-remote-anymore"&gt;Git: How to prune local tracking branches that do not exist on remote anymore - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="git"></category></entry><entry><title>[git]按日期列出所有分支信息</title><link href="http://mozillazg.com/2013/08/git-show-branches-by-date.html" rel="alternate"></link><updated>2013-08-17T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-08-17:2013/08/git-show-branches-by-date.html</id><summary type="html">&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="go"&gt;for k in `git branch|perl -pe s/^..//`;do echo -e &amp;quot;\e[31m&amp;quot;$k&amp;quot;\e[0m&amp;quot; `git log -1 --pretty=format:&amp;#39;- %s %Cgreen(%ci %cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39; &amp;quot;$k&amp;quot;|head -n 2`\\t;done | sort&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="git-show-branches-by-date" src="/static/images/2013-8-17_19-04-55.png" title="title" /&gt;&lt;/p&gt;
&lt;h2 id="_1"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.commandlinefu.com/commands/view/2345/show-git-branches-by-date-useful-for-showing-active-branches"&gt;Show git branches by date - useful for showing active branches | commandlinefu.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="git"></category></entry><entry><title>[git]显示单个文件变更日志</title><link href="http://mozillazg.com/2013/08/git-show-file-changelog.html" rel="alternate"></link><updated>2013-08-17T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2013-08-17:2013/08/git-show-file-changelog.html</id><summary type="html">&lt;p&gt;&lt;code&gt;git log -p filename&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; git log -p fabfile.py
&lt;span class="go"&gt;commit fd792030bc0ac1db0f1f97ec701a2fd8bcb26a07&lt;/span&gt;
&lt;span class="go"&gt;Author: username &amp;lt;email&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;Date:   Sun Jun 23 15:36:58 2013 +0800&lt;/span&gt;

&lt;span class="go"&gt;    commit title&lt;/span&gt;

&lt;span class="go"&gt;diff --git a/fabfile.py b/fabfile.py&lt;/span&gt;
&lt;span class="go"&gt;index 4ed36fa..1408118 100644&lt;/span&gt;
&lt;span class="go"&gt;--- a/fabfile.py&lt;/span&gt;
&lt;span class="go"&gt;+++ b/fabfile.py&lt;/span&gt;
&lt;span class="go"&gt;@@ -9,28 +9,29 @@ from fabric.api import settings&lt;/span&gt;

&lt;span class="go"&gt; @task&lt;/span&gt;
&lt;span class="go"&gt; def make_html():&lt;/span&gt;
&lt;span class="go"&gt;-    &amp;quot;&amp;quot;&amp;quot;生成 html 文件&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;-    local(&amp;#39;pelican content -o output -s pelicanconf.py&amp;#39;)&lt;/span&gt;
&lt;span class="go"&gt;+    &amp;quot;&amp;quot;&amp;quot;generate the web site&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;+    with settings(warn_only=True):&lt;/span&gt;
&lt;span class="go"&gt;+        local(&amp;#39;pelican content -o output -s pelicanconf.py -D&amp;#39;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;git log filename&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; git log fabfile.py
&lt;span class="go"&gt;commit fd792030bc0ac1db0f1f97ec701a2fd8bcb26a07&lt;/span&gt;
&lt;span class="go"&gt;Author: username &amp;lt;email&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;Date:   Sun Jun 23 15:36:58 2013 +0800&lt;/span&gt;

&lt;span class="go"&gt;    commit title&lt;/span&gt;


&lt;span class="gp"&gt;$&lt;/span&gt; git log --graph --pretty&lt;span class="o"&gt;=&lt;/span&gt;format:&lt;span class="s1"&gt;&amp;#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39;&lt;/span&gt; --abbrev-commit fabfile.py
&lt;span class="go"&gt;* fd79203 - commit title (8 weeks ago) &amp;lt;username&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;* 7642a05 - commit title (10 weeks ago) &amp;lt;username&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;* d04ba24 - commit title (10 weeks ago) &amp;lt;username&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/278192/view-the-change-history-of-a-file-using-git-versioning"&gt;git log - View the change history of a file using Git versioning - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="git"></category></entry></feed>