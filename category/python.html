<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mozillazg's Blog</title>
  <meta name="author" content="mozillazg">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://mozillazg.com/favicon.png" rel="icon">
  <link href="https://mozillazg.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="https://mozillazg.com/theme/js/modernizr-2.0.js"></script>
  <script src="https://mozillazg.com/theme/js/ender.js"></script>
  <script src="https://mozillazg.com/theme/js/octopress.js" type="text/javascript"></script>

</head>

<body class="collapse-sidebar">
  <header role="banner"><hgroup>
  <h1><a href="https://mozillazg.com/">Mozillazg's Blog</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mozillazg.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
    <li><a href="/index.html">Home</a></li>
      <li><a href="https://mozillazg.com/2014/10/pages/about-me.html">About me</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div class="blog-index">
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part3.html">让我们一起来构建一个模板引擎（三）</a>
      </h1>
      <p class="meta"><time datetime="2016-03-24T00:00:00+00:00" pubdate>周四 24 三月 2016</time></p>
</header>

  <div class="entry-content"><p>在 <a class="reference external" href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part2.html">上篇文章</a> 中我们的模板引擎实现了对 <tt class="docutils literal">if</tt> 和 <tt class="docutils literal">for</tt> 对支持，同时在文章的最后我给大家留了一个
问题：如何实现支持 <tt class="docutils literal">include</tt> 和 <tt class="docutils literal">extends</tt> 的标签功能。</p>
<p>在本篇文章中我们将一起来动手实现这两个功能。</p>
<div class="section" id="include">
<h2>include</h2>
<p><tt class="docutils literal">include</tt> 标签对语法是这样的：假设有一个 item.html 模板文件，它的内容如下:</p>
<div class="highlight"><pre>&lt;li&gt;{{ item }}&lt;/li&gt;
</pre></div>
<p>还有一个我们要渲染的模板 list.html 内容如下:</p>
<div class="highlight"><pre>&lt;ul&gt;
  {% for item in items %}
    {% include &quot;item.html&quot; %}
  {% endfor %}
&lt;/ul&gt;
</pre></div>
<p>渲染 list.html 后的结果类似:</p>
<div class="highlight"><pre>&lt;ul&gt;
  &lt;li&gt;item1&lt;/li&gt;
  &lt;li&gt;item2 ...</pre></div></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part3.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part2.html">让我们一起来构建一个模板引擎（二）</a>
      </h1>
      <p class="meta"><time datetime="2016-03-19T00:00:00+00:00" pubdate>周六 19 三月 2016</time></p>
</header>

  <div class="entry-content"><p>在 <a class="reference external" href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part1.html">上篇文章</a> 中我们的模板引擎实现了变量和注释功能，同时在文章的最后我给大家留了一个
问题：如何实现支持 <tt class="docutils literal">if</tt> 和 <tt class="docutils literal">for</tt> 的标签功能:</p>
<div class="highlight"><pre>{% if user.is_admin %}
    admin, {{ user.name }}
{% elif user.is_staff %}
    staff
{% else %}
    others
{% endif %}

{% for name in names %}
    {{ name }}
{% endfor %}
</pre></div>
<p>在本篇文章中我们将一起来实现这个功能。</p>
<div class="section" id="if-elif-else-endif">
<h2>if ... elif ... else ... endif</h2>
<p>首先我们来实现对 <tt class="docutils literal">if</tt> 语句的支持。 <tt class="docutils literal">if</tt> 语句的语法如下:</p>
<div class="highlight"><pre>{% if True %}
...
{% elif True %}
...
{% else %}
...
{% endif %}
</pre></div>
<p>我们首先要做的跟之前一样，那就是确定匹配标签语法的正则表达式。这里我们用的是下面
的正则来匹配标签语法:</p>
<div class="highlight"><pre><span class="n">re_tag ...</span></pre></div></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part2.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part1.html">让我们一起来构建一个模板引擎（一）</a>
      </h1>
      <p class="meta"><time datetime="2016-03-15T00:00:00+00:00" pubdate>周二 15 三月 2016</time></p>
</header>

  <div class="entry-content"><p>假设我们要生成下面这样的 html 字符串:</p>
<div class="highlight"><pre><span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;p&gt;</span>welcome, Tom<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;</span>age: 20<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>weight: 100<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>height: 170<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<p>要求姓名以及 <tt class="docutils literal"><span class="pre">&lt;ul&gt;&lt;/ul&gt;</span></tt> 中的内容是根据变量动态生成的，也就是这样的:</p>
<div class="highlight"><pre>&lt;div&gt;
    &lt;p&gt;welcome, {name}&lt;/p&gt;
    &lt;ul&gt;
        {info}
    &lt;/ul&gt;
&lt;/div&gt;
</pre></div>
<p>没接触过模板的同学可能会想到使用字符串格式化的方式来实现:</p>
<div class="highlight"><pre><span class="n">HTML</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span>
<span class="s">&lt;div&gt;</span>
<span class="s">    &lt;p&gt;welcome, {name}&lt;/p&gt;</span>
<span class="s">    &lt;ul&gt;</span>
<span class="s">        {info}</span>
<span class="s">    &lt;/ul&gt;</span>
<span class="s">&lt;/div&gt;</span>
<span class="s">&#39;&#39;&#39;</span>


<span class="k">def</span> <span class="nf">gen_html ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part1.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/python-let-cli-support-pipe-read-data-from-stdin.html">[python]如何让命令行程序支持管道和重定向输入</a>
      </h1>
      <p class="meta"><time datetime="2016-03-10T00:00:00+00:00" pubdate>周四 10 三月 2016</time></p>
</header>

  <div class="entry-content"><p>管道和重定向输入的数据都是通过标准输入传入程序的， <tt class="docutils literal">sys.stdin</tt> 这个 file-like 对象即为标准输入。
同时也可以通过 <tt class="docutils literal">sys.stdin.isatty()</tt>
判断是否是管道和重定向输入（为 <tt class="docutils literal">True</tt> 时表示是交互式环境，
为 <tt class="docutils literal">False</tt> 时是我们要的场景）。</p>
<p>假设有个 <tt class="docutils literal">hello.py</tt>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">isatty</span><span class="p">():</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">data</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">main</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
<p>测试效果:</p>
<div class="highlight"><pre>$ echo ...</pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/python-let-cli-support-pipe-read-data-from-stdin.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/python-exec-function-globals-and-locals-arguments.html">[python] exec 函数的 globals 和 locals 参数的用法</a>
      </h1>
      <p class="meta"><time datetime="2016-03-08T00:00:00+00:00" pubdate>周二 08 三月 2016</time></p>
</header>

  <div class="entry-content"><p>我们都知道 <tt class="docutils literal">exec</tt> 函数可以用来动态执行 python 代码:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="s">&#39;foobar = 123&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">foobar</span>
<span class="mi">123</span>
</pre></div>
<p>那么大家是否知道 <tt class="docutils literal">exec</tt> 函数还支持两个可选参数呢(不支持通过关键字去指定参数)？ :</p>
<div class="highlight"><pre><span class="k">exec</span><span class="p">(</span><span class="nb">object</span><span class="p">[,</span> <span class="nb">globals</span><span class="p">[,</span> <span class="nb">locals</span><span class="p">]])</span>
</pre></div>
<p>这两个参数可以用来指定执行代码时可以使用的全局变量和局部变量,
以及收集执行代码后的全局变量和局部变量。</p>
<ul class="simple">
<li><tt class="docutils literal">globals</tt> 默认为 <tt class="docutils literal">globals()</tt></li>
<li><tt class="docutils literal">locals</tt> 默认为 <tt class="docutils literal">globals</tt> 参数的值</li>
</ul>
<p>下面将举例说明指定 <tt class="docutils literal">globals</tt> 和 <tt class="docutils literal">locals</tt> 时的效果。</p>
<div class="section" id="globals">
<h2>globals</h2>
<p><tt class="docutils literal">globals</tt> 是个 <tt class="docutils literal">dict</tt> 对象，用来指定代码执行时可以使用的全局变量以及收集代码执行后的全局变量:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="s">&#39;abc = age + 1&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="s">&#39;abc = age + 1&#39;</span><span class="p">,</span> <span class="p">{})</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most ...</span></pre></div></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/python-exec-function-globals-and-locals-arguments.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/03/python-use-keyword-model-check-an-name-weither-keyword.html">[python]使用 keyword 模块检查变量名是否是 python 关键字</a>
      </h1>
      <p class="meta"><time datetime="2016-03-08T00:00:00+00:00" pubdate>周二 08 三月 2016</time></p>
</header>

  <div class="entry-content"><p>无意中发现 python 标准库中包含呢一个 <tt class="docutils literal">keyword</tt> 模块
可以用来检查一个变量名是否是 python 关键字:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">keyword</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">keyword</span><span class="o">.</span><span class="n">iskeyword</span><span class="p">(</span><span class="s">&#39;is&#39;</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">keyword</span><span class="o">.</span><span class="n">iskeyword</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
<span class="bp">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">keyword</span><span class="o">.</span><span class="n">kwlist</span>
<span class="p">[</span><span class="s">&#39;False&#39;</span><span class="p">,</span> <span class="s">&#39;None&#39;</span><span class="p">,</span> <span class="s">&#39;True&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">,</span> <span class="s">&#39;as&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s">&#39;with&#39;</span><span class="p">,</span> <span class="s">&#39;yield&#39;</span><span class="p">]</span>
</pre></div>
<p>这个模块只有两个函数:</p>
<ul class="simple">
<li><tt class="docutils literal">keyword.iskeyword(s)</tt>: 是否是关键字</li>
<li><tt class="docutils literal">keyword.kwlist</tt>: 返回解释器定义的所有关键字列表</li>
</ul>
<div class="section" id="id1">
<h2>参考资料</h2>
<ul class="simple">
<li><a class="reference external" href="https://docs.python.org/3/library/keyword.html">32.6. keyword — Testing for Python keywords — Python 3.5.1 documentation</a></li>
</ul>
</div>
</div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/03/python-use-keyword-model-check-an-name-weither-keyword.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/02/bustard-a-tiny-wsgi-web-framework.html">[python]bustard: 一个玩具式的 web 框架</a>
      </h1>
      <p class="meta"><time datetime="2016-02-22T00:00:00+00:00" pubdate>周一 22 二月 2016</time></p>
</header>

  <div class="entry-content"><p>最近一直在填一个玩具式（仅供学习交流，不可用于生产环境）的 WEB 框架的坑，现在大部分功能都已经完成的差不多了， 所以写篇博文介绍一下这个框架。</p>
<div class="line-block">
<div class="line">项目地址： <a class="reference external" href="https://github.com/mozillazg/bustard">https://github.com/mozillazg/bustard</a></div>
<div class="line">安装：</div>
</div>
<pre class="literal-block">
pip install bustard
pip install psycopg2  # 如果需要 orm 功能
</pre>
<p>包含的功能：</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/router.py">路由</a></li>
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/http.py">Request 和 Response</a></li>
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/http.py">Cookies</a> 和 <a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/sessions.py">Session</a></li>
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/orm.py">ORM</a></li>
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/template.py">模版</a></li>
<li><a class="reference external" href="https://github.com/mozillazg/bustard/blob/master/bustard/servers.py">WSGI server</a></li>
</ul>
<p>依赖:</p>
<ul class="simple">
<li>Python 3.5</li>
<li>psycopg2</li>
</ul>
<div class="section" id="hello-world">
<h2>Hello World</h2>
<p><a class="reference external" href="https://github.com/mozillazg/bustard">bustard</a> 参考了 <a class="reference external" href="https://github.com/mitsuhiko/flask">Flask</a> 和 <a class="reference external" href="https://github.com/django/django">Django</a> 的设计，路由风格跟 ...</p></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/02/bustard-a-tiny-wsgi-web-framework.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/02/psycopg2-how-to-get-lastrowid-when-insert-a-new-row.html">psycopg2 插入数据时如何获取新纪录的主键值</a>
      </h1>
      <p class="meta"><time datetime="2016-02-15T00:00:00+00:00" pubdate>周一 15 二月 2016</time></p>
</header>

  <div class="entry-content"><p>默认情况下，使用 psycopg2 时 <code>cursor.lastrowid</code> 并不会返回新纪录的主键值。
<a href="http://initd.org/psycopg/docs/cursor.html?highlight=lastrowid#cursor.lastrowid">文档</a> 中是这样解释的：</p>
<blockquote>
<p>cursor.lastrowid</p>
<p>This read-only attribute provides the OID of the last row inserted by the cursor.
If the table wasn’t created with OID support or the last operation is not a single record insert,
the attribute is set to None ...</p></blockquote></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/02/psycopg2-how-to-get-lastrowid-when-insert-a-new-row.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/01/python-plus-work-on-immutable-or-mutable-object.md.html">python 中 += 运算符在可变对象和不可变对象上的不同效果</a>
      </h1>
      <p class="meta"><time datetime="2016-01-31T00:00:00+00:00" pubdate>周日 31 一月 2016</time></p>
</header>

  <div class="entry-content"><p>先来看内置的不可变对象 <code>+=</code> 的结果：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="sc">&#39;b&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140606482358088</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">+=</span> <span class="sc">&#39;c&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="err">&#39;</span><span class="n">bc</span><span class="err">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140606244543656</span>
</pre></div>


<p>可以看到内置的不可变对象 <code>+=</code> 时，会返回一个新的对象。那么内置的可变对象 <code>+=</code> 呢？：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140606245413384</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140606245413384</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140606245413384</span>
</pre></div>


<p>可以看到内置的可变对象的 ...</p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/01/python-plus-work-on-immutable-or-mutable-object.md.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/01/sqlalchemy-use-postgresql-uuid.html">使用 sqlalchemy 时如何配置使用 postgresql 的 uuid 类型</a>
      </h1>
      <p class="meta"><time datetime="2016-01-30T00:00:00+00:00" pubdate>周六 30 一月 2016</time></p>
</header>

  <div class="entry-content"><p>在 sqlalchemy 中 postgresql 的 uuid 类型对象是： 
<code>sqlalchemy.dialects.postgresql.UUID</code>, 所以基本的用法是：</p>
<div class="codehilite"><pre><span class="n">from</span> <span class="n">sqlalchemy</span><span class="p">.</span><span class="n">dialects</span><span class="p">.</span><span class="n">postgresql</span> <span class="n">import</span> <span class="n">UUID</span>

<span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">)</span>
</pre></div>


<p>下面重点要说的就是如何设置自动生成随机的 uuid。</p>
<p>第一种办法是，使用 python 的 <code>uuid</code> 模块生成 uuid:</p>
<div class="codehilite"><pre><span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">UUID</span><span class="p">,</span> <span class="k">default</span><span class="o">=</span><span class="n">lambda</span><span class="o">:</span> <span class="n">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">uuid4</span><span class="p">()))</span>
</pre></div>


<p>第二种办法（推荐）是，服务端去生成 uuid 之 <code>gen_random_uuid()</code>:</p>
<div class="codehilite"><pre><span class="n">from</span> <span class="n">postgreql</span> <span class="n">import</span> <span class="n">text</span>

<span class="n">id ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/01/sqlalchemy-use-postgresql-uuid.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2016/01/python-function-argument-type-check-base-on-function-annotations.html">基于 Python 3 新增的函数注解（Function Annotations ）语法实现参数类型检查功能</a>
      </h1>
      <p class="meta"><time datetime="2016-01-06T00:00:00+00:00" pubdate>周三 06 一月 2016</time></p>
</header>

  <div class="entry-content"><h2 id="function-annotations">函数注解（Function Annotations）</h2>
<p><a href="https://www.python.org/dev/peps/pep-3107/">函数注解语法</a> 可以让你在定义函数的时候对参数和返回值添加注解：</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">foobar</span><span class="p">(</span><span class="n">a</span><span class="o">:</span> <span class="kt">int</span><span class="p">,</span> <span class="n">b</span><span class="o">:</span> <span class="s">&quot;it&#39;s b&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">:</span> <span class="n">str</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tuple</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
</pre></div>


<ul>
<li><code>a: int</code> 这种是注解参数</li>
<li><code>c: str = 5</code> 是注解有默认值的参数</li>
<li><code>-&gt; tuple</code> 是注解返回值。</li>
</ul>
<p>注解的内容既可以是个类型也可以是个字符串，甚至表达式：</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">foobar</span><span class="p">(</span><span class="n">a</span><span class="o">:</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>


<p>那么如何获取我们定义的函数注解呢？至少有两种办法：</p>
<ul>
<li>
<p><code>__annotations__</code>:</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">foobar</span><span class="p">.</span><span class="n">__annotations__</span>
<span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="kt">int</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="s">&quot;it ...</span></pre></div></li></ul></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2016/01/python-function-argument-type-check-base-on-function-annotations.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/08/let-us-build-a-web-server-part-3-zh-cn.html">让我们一起来构建一个 Web 服务器（三）</a>
      </h1>
      <p class="meta"><time datetime="2015-08-04T00:00:00+00:00" pubdate>周二 04 八月 2015</time></p>
</header>

  <div class="entry-content"><p>本文译自： <a class="reference external" href="http://ruslanspivak.com/lsbaws-part3/">http://ruslanspivak.com/lsbaws-part3/</a></p>
<blockquote>
“当我们必须要发明创造的时候学到的东西最多” —— Piaget</blockquote>
<p>在 <a class="reference external" href="http://mozillazg.com/2015/06/let-us-build-a-web-server-part-2-zh-cn.html">第二部分</a> 你创建了一个能够处理基本的 GET 请求的微型 WSGI 服务器。
同时我向你提了一个问题，“如何才能让你的服务器在同一时刻能够处理多个请求？”
在本篇文章中你可以找到答案。那么，系好安全带，加足马力吧。
你将会有一趟非常快速的旅程。
确保你已经准备好了你的 Linux, Mac OS X （或任一 *nix 系统）以及 Python 。
本文所有的源代码都已经放在 <a class="reference external" href="https://github.com/rspivak/lsbaws/blob/master/part3/">Github</a> 上了。</p>
<p>首先，让我们来回顾一下一个非常基础的 Web 服务器看起来是啥样的，
以及这个服务器需要做些什么才能服务来自客户端的请求。
你在 <a class="reference external" href="http://mozillazg.com/2015/06/let-us-build-a-web-server-part-1-zh-cn.html">第一部分</a> 和 <a class="reference external" href="http://mozillazg.com/2015/06/let-us-build-a-web-server-part-2-zh-cn.html">第二部分</a> 创建的服务器是个一次只能处理一个客户端请求的循环服务器。
在它处理完正在处理的客户端请求之前，它是无法接受新的连接的。
一些客户端可能会不高兴，因为它们必须得排队等待，
对于那些非常繁忙的服务器，这个等待可能会是个非常漫长的过程 ...</p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/08/let-us-build-a-web-server-part-3-zh-cn.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/06/python-str-strip-lstrip-rstrip-warnning.html">在 python 中使用 str.strip 方法时需要注意的地方</a>
      </h1>
      <p class="meta"><time datetime="2015-06-08T00:00:00+00:00" pubdate>周一 08 六月 2015</time></p>
</header>

  <div class="entry-content"><p>首先问大家一个问题：你觉得下面代码的输出会是什么？</p>
<pre class="literal-block">
print '12345-abc-12345-defg-54321'.strip('12345')
</pre>
<p>我猜有些同学的答案会是: <tt class="docutils literal"><span class="pre">-abc-12345-defg-54321</span></tt> ，实际的结果是:</p>
<pre class="literal-block">
&gt;&gt;&gt; print '12345-abc-12345-defg-54321'.strip('12345')
-abc-12345-defg-
</pre>
<p>为什么不是 <tt class="docutils literal"><span class="pre">-abc-12345-defg-54321</span></tt> 呢？我们先来看一下 <tt class="docutils literal">str.strip</tt> 的文档就知道了:</p>
<pre class="literal-block">
S.strip([chars]) -&gt; string or unicode

Return a copy of the string S with leading and trailing
whitespace removed.
If chars is given and not None, remove characters in ...</pre></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/06/python-str-strip-lstrip-rstrip-warnning.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/06/let-us-build-a-web-server-part-2-zh-cn.html">让我们一起来构建一个 Web 服务器（二）</a>
      </h1>
      <p class="meta"><time datetime="2015-06-06T00:00:00+00:00" pubdate>周六 06 六月 2015</time></p>
</header>

  <div class="entry-content"><p>本文译自：<a class="reference external" href="http://ruslanspivak.com/lsbaws-part2/">http://ruslanspivak.com/lsbaws-part2/</a></p>
<p>还记得吗？在 <a class="reference external" href="http://mozillazg.com/2015/06/let-us-build-a-web-server-part-1-zh-cn.html">第一部分</a> 我向你问了一个问题：”如何在你新鲜出炉的 Web 服务器上不做任何修改的就运行 Django 应用，Flask 应用， Pyramid 应用?“
往下读就可以找到答案。</p>
<p>在过去，当你选择的 Python Web 框架会限制你所能选择的 Web 服务器, 如果那个框架和服务器被设计的可以一起工作的话，那就皆大欢喜了：</p>
<p><img alt="Server Framework Fit" src="/static/images/lsbaws-part2/lsbaws_part2_before_wsgi.png" /></p>
<p>但是，当你尝试把一个服务器和一个框架一起使用的时候可能会（可能你已经）面临它们被设计为不兼容的情况：</p>
<p><img alt="Server Framework Clash" src="/static/images/lsbaws-part2/lsbaws_part2_after_wsgi.png" /></p>
<p>一般来说你必须使用能够一起工作的组件而不仅仅是你想使用的组件。</p>
<p>那么，你如何确保你能够在你的 Web 服务器上运行多个 Web 框架，并且不需要修改 Web 服务器或 Web 框架的现有的代码呢？
解决这个问题的答案就是 Python Web Server Gateway Interface ...</p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/06/let-us-build-a-web-server-part-2-zh-cn.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/06/let-us-build-a-web-server-part-1-zh-cn.html">让我们一起来构建一个 Web 服务器（一）</a>
      </h1>
      <p class="meta"><time datetime="2015-06-03T00:00:00+00:00" pubdate>周三 03 六月 2015</time></p>
</header>

  <div class="entry-content"><p>本文译自：<a class="reference external" href="http://ruslanspivak.com/lsbaws-part1/">http://ruslanspivak.com/lsbaws-part1/</a></p>
<p>有一天出去散步的时候，一个女人来到一处工地上，她看到有三个男人在工作。
她问第一个人，“你在做什么？“，第一个男人对这个问题感到非常的厌烦，
他大声的说到”你没看到我正在砌砖吗？“女人对这个答案不大满意，
她又去问第二个男人他在做什么。
第二个男人回答道，”我正在建造一面砖墙。”
然后，他把注意力转向了第一个男人，他说道，
“嘿，你只完成墙的尾部。你需要把最后那块砖拿掉。”
仍旧不满意这个答案，她又问第三个男人他在做什么。
这个男人边望着天边对他说，
”我正在建造世界上最大的教堂。“
当他站在这里仰望着天空的时候，另外两个男人开始争吵应该怎么放砖。
这个男人转向前面的两个男人并说道，
“嘿，伙计们，别担心那块砖了。那只是一块内墙，
它将会被涂平没人会看到那块砖。
只需移动到另一层。” <a class="footnote-reference" href="#id2" id="id1">[1]</a></p>
<p>这则故事的寓意是当你了解了整个系统并且理解了不同的部分是如何组合在一起的时候（砖，墙，教堂），
你就可以更快的识别和解决问题（不正确的砖）。</p>
<p>对于从零开始创建我们自己的 Web server 来说需要做些什么呢？</p>
<p><strong>我相信要成为一个优秀的开发者你必须更好的理解你日常使用的基础软件系统，包括编程语言，编译器 ...</strong></p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/06/let-us-build-a-web-server-part-1-zh-cn.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/04/fix-python-gearman-raise-received-non-binary-arguments-errors.html">[python]修复 python-gearman 出现 Received non-binary arguments 错误</a>
      </h1>
      <p class="meta"><time datetime="2015-04-20T00:00:00+00:00" pubdate>周一 20 四月 2015</time></p>
</header>

  <div class="entry-content"><p>今天第一次使用 python-gearman 就出现了 <tt class="docutils literal">Received <span class="pre">non-binary</span> arguments</tt> 错误。</p>
<p>下面重现一下错误，当传入的 task_name 参数类型是 unicode 时就会报错:</p>
<pre class="literal-block">
client.submit_job(u&quot;task1&quot;)  # error: Received non-binary arguments
</pre>
<p>查看源码后发现，是因为 gearman client submit_job 的 task name 不支持 unicode, 把参数类型改成 str 或 bytes 就可以了：</p>
<pre class="literal-block">
client.submit_job(b&quot;task1&quot;)  # ok
</pre>
<div class="section" id="id1">
<h2>参考资料</h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Yelp/python-gearman/blob/740a23f20f39f0f0d557e25afe998e56cc72a9bf/gearman/protocol.py#L246">python-gearman/protocol.py at 740a23f20f39f0f0d557e25afe998e56cc72a9bf · Yelp/python-gearman</a></li>
</ul>
</div>
</div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/04/fix-python-gearman-raise-received-non-binary-arguments-errors.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2015/03/fix-install-psycopg2-raise-pg_config-excutable-not-found.html">修复安装 psycopg2 时出现“pg_config executable not found”错误</a>
      </h1>
      <p class="meta"><time datetime="2015-03-15T00:00:00+00:00" pubdate>周日 15 三月 2015</time></p>
</header>

  <div class="entry-content"><p>错误详情：</p>
<div class="codehilite"><pre><span class="n">Running</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">egg_info</span> <span class="k">for</span> <span class="n">package</span> <span class="n">psycopg2</span>

    <span class="nl">Error:</span> <span class="n">pg_config</span> <span class="n">executable</span> <span class="n">not</span> <span class="n">found</span><span class="p">.</span>

    <span class="n">Please</span> <span class="n">add</span> <span class="n">the</span> <span class="n">directory</span> <span class="n">containing</span> <span class="n">pg_config</span> <span class="n">to</span> <span class="n">the</span> <span class="n">PATH</span>
    <span class="n">or</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">full</span> <span class="n">executable</span> <span class="n">path</span> <span class="n">with</span> <span class="n">the</span> <span class="n">option</span><span class="o">:</span>

        <span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">pg</span><span class="o">-</span><span class="n">config</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">pg_config</span> <span class="n">build</span> <span class="p">...</span>

    <span class="n">or</span> <span class="n">with</span> <span class="n">the</span> <span class="n">pg_config</span> <span class="n">option</span> <span class="n">in</span> <span class="err">&#39;</span><span class="n">setup</span><span class="p">.</span><span class="n">cfg</span><span class="err">&#39;</span><span class="p">.</span>
</pre></div>


<p>出错的原因是因为找不到 ...</p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2015/03/fix-install-psycopg2-raise-pg_config-excutable-not-found.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/12/python-sqlalchemy-fix-Instance-is-not-bound-to-a-Session-error.html">[python] 解决 SQLAlchemy 提示 Instance is not bound to a Session 错误的问题</a>
      </h1>
      <p class="meta"><time datetime="2014-12-22T00:00:00+00:00" pubdate>周一 22 十二月 2014</time></p>
</header>

  <div class="entry-content"><p>在使用 SQLAlchemy 的过程中，有时会出现下列错误:</p>
<ul class="simple">
<li>Parent instance '&lt;User at 0x2b45b53509d0&gt;' is not bound to a Session; lazy load operation of attribute  cannot proceed</li>
<li>Instance '&lt;User at 0x2b45b53509d0&gt;' is not bound to a Session; attribute refresh operation cannot proceed</li>
</ul>
<p>出现以上错误的原因是因为：session 已经被提交，导致操作的 model 对象已经不在当前 session 中了。
解决的办法就是：把对象重新加入到当前 session 中:</p>
<div class="highlight"><pre><span class="k">def ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/12/python-sqlalchemy-fix-Instance-is-not-bound-to-a-Session-error.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/12/python-redis-py-notes.html">[python] redis-py 模块使用时需要注意的一些事情</a>
      </h1>
      <p class="meta"><time datetime="2014-12-21T00:00:00+00:00" pubdate>周日 21 十二月 2014</time></p>
</header>

  <div class="entry-content"><div class="section" id="redis-strictredis">
<h2>Redis 类 与 StrictRedis 类</h2>
<p><tt class="docutils literal">Redis</tt> 类 与 <tt class="docutils literal">StrictRedis</tt> 类方法的一些差异（<tt class="docutils literal">StrictRedis</tt> 实现的是标准 redis 命令）：</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="45%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">命令</th>
<th class="head">Redis</th>
<th class="head">StrictRedis</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>SETEX</td>
<td><tt class="docutils literal">setex(name, value, time)</tt></td>
<td><tt class="docutils literal">setex(name, time, value)</tt></td>
</tr>
<tr><td>ZADD</td>
<td><p class="first"><tt class="docutils literal">zadd(name, *args, **kwargs)</tt></p>
<ul class="last simple">
<li><tt class="docutils literal">args</tt>: name1, score1, name2, score2,...</li>
<li><tt class="docutils literal">kwargs</tt>: name1=score1, name2=score2,...</li>
</ul>
</td>
<td><p class="first"><tt class="docutils literal">zadd(name, *args, **kwargs)</tt></p>
<ul class="last simple">
<li><tt class="docutils literal">args</tt>: score1, name1, score2, name2 ...</li></ul></td></tr></tbody></table></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/12/python-redis-py-notes.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/11/python-alembic-change-foreignkey-attribute.html">[python]通过 alembic 更改外键相关的属性</a>
      </h1>
      <p class="meta"><time datetime="2014-11-25T00:00:00+00:00" pubdate>周二 25 十一月 2014</time></p>
</header>

  <div class="entry-content"><p>当我们想修改已有的外键字段属性值时， <tt class="docutils literal">alembic reversion <span class="pre">--autogenerate</span></tt> 无法检查外键属性修改，
需要我们手动写相关的操作语句。</p>
<p>下面以修改外键的 <tt class="docutils literal">ondelete</tt> 和 <tt class="docutils literal">onupdate</tt> 属性为例，讲解如何修改外键属性。</p>
<p>假设有如下 Model:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;child&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;parent.id&#39;</span><span class="p">))</span>
</pre></div>
<p>现在想要修改 <tt class="docutils literal">Child</tt> 中 <tt class="docutils literal">parent_id</tt> 的外键属性:</p>
<div class="highlight"><pre><span class="n">parent_id</span> <span class="o">=</span> <span class="n">Column ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/11/python-alembic-change-foreignkey-attribute.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/11/python-alembic-rename-column-name-field-name.html">[python]通过 alembic 重命名表列名（Model字段名）</a>
      </h1>
      <p class="meta"><time datetime="2014-11-25T00:00:00+00:00" pubdate>周二 25 十一月 2014</time></p>
</header>

  <div class="entry-content"><p>为什么要特意讲一下这个，是因为 alembic 无法自动检测是否对字段名进行了重命名操作，需要我们手动添加相关语句。</p>
<p>假设有下面这样一个 Model</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;user&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
</pre></div>
<p>我们现在想要把 <tt class="docutils literal">name</tt> 字段改名为 <tt class="docutils literal">username</tt>, 通过 <tt class="docutils literal">alembic revision <span class="pre">--autogenerate</span></tt> 无法实现我们的目的:</p>
<pre class="literal-block">
INFO  [alembic.migration] Context impl MySQLImpl.
INFO  [alembic.migration] Will assume non-transactional DDL.
INFO  [alembic.autogenerate.compare] Detected added column ...</pre></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/11/python-alembic-rename-column-name-field-name.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/11/python-copy-a-class.html">[python]如何复制一个 class</a>
      </h1>
      <p class="meta"><time datetime="2014-11-20T00:00:00+00:00" pubdate>周四 20 十一月 2014</time></p>
</header>

  <div class="entry-content"><p>通过下面两种方法可以复制一个 <code>class</code>:</p>
<ul>
<li><code>class B(A): pass</code></li>
<li><code>B = type("B", (A,), {})</code></li>
</ul>
<h1 id="_1">参考资料</h1>
<ul>
<li><a href="http://stackoverflow.com/questions/9541025/how-to-copy-a-python-class">How to copy a python class? - Stack Overflow</a></li>
</ul></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/11/python-copy-a-class.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/07/python-use-tox-test-code.html">[python]使用 tox 测试代码在不同环境下的兼容性</a>
      </h1>
      <p class="meta"><time datetime="2014-07-16T00:00:00+00:00" pubdate>周三 16 七月 2014</time></p>
</header>

  <div class="entry-content"><div class="section" id="tox">
<h2>Tox 是什么？</h2>
<p>Tox 是个标准的 <a class="reference external" href="https://pypi.python.org/pypi/virtualenv">virtualenv</a> 管理器和命令行测试工具。你可以用于:</p>
<ul class="simple">
<li>检查你的软件包能否在不同的 Python 版本或解释器下正常安装</li>
<li>在不同的环境中运行运行你的测试代码</li>
<li>作为持续集成服务器的前端，大大减少测试工作所需时间</li>
</ul>
</div>
<div class="section" id="id1">
<h2>安装</h2>
<p><tt class="docutils literal">pip install tox</tt></p>
</div>
<div class="section" id="id2">
<h2>简单使用</h2>
<p><strong>使用前，请确保系统中已经安装了不同版本的 Python 解释器</strong> :</p>
<pre class="literal-block">
 ~$ python -V
Python 2.7.6
 ~$ python2.6 -V
Python 2.6.9
 ~$ python3.3 -V
Python 3.3.2+
 ~$ python3.4 -V
Python 3.4.0
 ~$ pypy ...</pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/07/python-use-tox-test-code.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/06/python-define-abstract-base-classes.html">[python] 定义抽象基类(Abstract Base Classes)</a>
      </h1>
      <p class="meta"><time datetime="2014-06-07T00:00:00+00:00" pubdate>周六 07 六月 2014</time></p>
</header>

  <div class="entry-content"><p>抽象基类一般用于规定子类必须重新定义某些方法。比如 web 框架中的 cache 部分的基类一般类似下面这样:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">BaseCache</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&#39;subclasses of BaseCache must provide a get() method&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&#39;subclasses of BaseCache must provide a set() method&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MemcachedCache</span><span class="p">(</span><span class="n">BaseCache</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/06/python-define-abstract-base-classes.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/06/python-import-xy.html">[python] 模块间互相导入的问题</a>
      </h1>
      <p class="meta"><time datetime="2014-06-02T00:00:00+00:00" pubdate>周一 02 六月 2014</time></p>
</header>

  <div class="entry-content"><p>两个模块间互相导入时，可能会出现如下的问题：</p>
<div class="highlight"><pre><span class="c"># a.py</span>
<span class="kn">from</span> <span class="nn">b</span> <span class="kn">import</span> <span class="n">y</span>
<span class="k">print</span> <span class="n">y</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># b.py</span>
<span class="kn">from</span> <span class="nn">a</span> <span class="kn">import</span> <span class="n">x</span>
<span class="k">print</span> <span class="n">x</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">10</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">b</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s">&quot;b.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">a</span> <span class="kn">import</span> <span class="n">x</span>
  <span class="n">File</span> <span class="s">&quot;a.py&quot;</span><span class="p">,</span> <span class="n">line ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/06/python-import-xy.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/05/python-function-xyz.html">[python] 函数陷阱</a>
      </h1>
      <p class="meta"><time datetime="2014-05-28T00:00:00+00:00" pubdate>周三 28 五月 2014</time></p>
</header>

  <div class="entry-content"><p>本文说的这几个问题适用于 <tt class="docutils literal">python 2.6+</tt>  。</p>
<div class="section" id="unboundlocalerror">
<h2>UnboundLocalError</h2>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="o">...</span><span class="p">:</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">func</span><span class="p">()</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">UnboundLocalError</span>                         <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="mi">08</span><span class="n">a2da4138f6</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">func</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mf">9e6</span><span class="n">cf545bc05</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="n">func</span><span class="p">()</span>
      <span class="mi">1</span> <span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
<span class="o">----&gt;</span> <span class="mi">2</span>     <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      <span class="mi">3</span>     <span class="n">a ...</span></pre></div></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/05/python-function-xyz.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/03/python-save-an-Unicode-encoding-file.html">[python]如何生成一个 Unicode 编码的文件</a>
      </h1>
      <p class="meta"><time datetime="2014-03-03T00:00:00+00:00" pubdate>周一 03 三月 2014</time></p>
</header>

  <div class="entry-content"><p>平时我们用记事本保存文件时，可以看到文件编码可以选择 Unicode 编码。
那么如何用 python 生成一个 Unicode 编码的文件呢？</p>
<p>只需知道 python 中哪个编码代表 Unicode 编码，我们就可以生成一个 Unicode 编码的文件：</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="16%" />
<col width="38%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr><td>Codec</td>
<td>Aliases</td>
<td>Languages</td>
<td>Note</td>
</tr>
<tr><td>utf_16</td>
<td>U16, utf16</td>
<td>all languages</td>
<td>Unicode(UTF-16 LE BOM)</td>
</tr>
<tr><td>utf_16_be</td>
<td>UTF-16BE</td>
<td>all languages (BMP only)</td>
<td>Unicode(UTF-16 BE)</td>
</tr>
<tr><td>utf_16_le</td>
<td>UTF-16LE</td>
<td>all languages (BMP only)</td>
<td>Unicode(UTF-16 LE)</td>
</tr>
</tbody>
</table>
<p>上面表格中，LE ...</p></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/03/python-save-an-Unicode-encoding-file.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/01/python-create-immutable-class.html">[python]如何创建一个不可变的类</a>
      </h1>
      <p class="meta"><time datetime="2014-01-25T00:00:00+00:00" pubdate>周六 25 一月 2014</time></p>
</header>

  <div class="entry-content"><p>所谓的不可变的类就是类的实例不可修改。</p>
<p>下面我们先看一下普通的类:</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">pass</span>
   <span class="o">...</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">a</span><span class="o">.</span><span class="n">abc</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">a</span><span class="o">.</span><span class="n">abc</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>
<p>普通的类的实例可以在运行时添加新的属性。</p>
<p>那么如何定义一个不可变的类呢？
下面就来看一个不可变类的例子：</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="o">....</span><span class="p">:</span>     <span class="n">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;abc&#39;</span><span class="p">]</span>
  <span class="o">....</span><span class="p">:</span>     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">abc</span><span class="p">):</span>
  <span class="o">....</span><span class="p">:</span>         <span class="nb">super</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__setattr__</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">abc</span><span class="p">)</span>
  <span class="o">....</span><span class="p">:</span>     <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
  <span class="o">....</span><span class="p">:</span>         <span class="k">raise ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/01/python-create-immutable-class.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/01/python-fix-shell-python-program-redirect-to-file-raise-UnicodeDecodeError.html">[python]解决将 python 程序输出结果重定向到文件时，出现 UnicodeDecodeError 错误</a>
      </h1>
      <p class="meta"><time datetime="2014-01-19T00:00:00+00:00" pubdate>周日 19 一月 2014</time></p>
</header>

  <div class="entry-content"><p>比如：有一个 python 程序 hello.py</p>
<div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="k">print</span> <span class="s">u&#39;你好&#39;</span>
</pre></div>
<p>将输出结果重定向到文件，就会出现 UnicodeEncodeError:</p>
<div class="highlight"><pre><span class="gp">$</span> python hello.py &gt; hello.txt
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;hello.py&quot;, line 4, in &lt;module&gt;</span>
<span class="go">    print u&#39;你好&#39;</span>
<span class="go">UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 0-1: ordinal not ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/01/python-fix-shell-python-program-redirect-to-file-raise-UnicodeDecodeError.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://mozillazg.com/2014/01/python-use-multiprocessing-dummy-run-theading-task.html">[python]使用 multiprocessing.dummy 执行多线程任务</a>
      </h1>
      <p class="meta"><time datetime="2014-01-19T00:00:00+00:00" pubdate>周日 19 一月 2014</time></p>
</header>

  <div class="entry-content"><p>本文将简单讲述一种使用 <tt class="docutils literal">multiprocessing.dummy</tt> 模块执行多线程任务的方法。</p>
<p><tt class="docutils literal">multiprocessing.dummy</tt> 模块与 <tt class="docutils literal">multiprocessing</tt> 模块的区别： <tt class="docutils literal">dummy</tt>
模块是多线程，而 <tt class="docutils literal">multiprocessing</tt> 是多进程， api 都是通用的。
所有可以很方便将代码在多线程和多进程之间切换。</p>
<p>下面是一个示例:</p>
<div class="highlight"><pre><span class="c"># from multiprocessing import Pool</span>
<span class="kn">from</span> <span class="nn">multiprocessing.dummy</span> <span class="kn">import</span> <span class="n">Pool</span> <span class="k">as</span> <span class="n">ThreadPool</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">urllib2</span>

<span class="n">urls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&#39;http://www.baidu.com&#39;</span><span class="p">,</span>
    <span class="s">&#39;http://home.baidu.com/&#39;</span><span class="p">,</span>
    <span class="s">&#39;http://tieba.baidu.com/&#39;</span><span class="p">,</span>
    <span class="s">&#39;http://zhidao.baidu.com ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="https://mozillazg.com/2014/01/python-use-multiprocessing-dummy-run-theading-task.html">Read On &crarr;</a>
  </footer>
  		</article>
<div class="pagination">
    <a class="prev" href="https://mozillazg.com/category/python2.html">&larr; Older</a>

  <br />
</div></div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part3.html">让我们一起来构建一个模板引擎（三）</a>
      </li>
      <li class="post">
          <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part2.html">让我们一起来构建一个模板引擎（二）</a>
      </li>
      <li class="post">
          <a href="https://mozillazg.com/2016/03/let-us-build-a-template-engine-part1.html">让我们一起来构建一个模板引擎（一）</a>
      </li>
      <li class="post">
          <a href="https://mozillazg.com/2016/03/python-let-cli-support-pipe-read-data-from-stdin.html">[python]如何让命令行程序支持管道和重定向输入</a>
      </li>
      <li class="post">
          <a href="https://mozillazg.com/2016/03/python-exec-function-globals-and-locals-arguments.html">[python] exec 函数的 globals 和 locals 参数的用法</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="https://mozillazg.com/category/comics.html">comics</a></li>
        <li><a href="https://mozillazg.com/category/database.html">database</a></li>
        <li><a href="https://mozillazg.com/category/django.html">django</a></li>
        <li><a href="https://mozillazg.com/category/docker.html">docker</a></li>
        <li><a href="https://mozillazg.com/category/english.html">english</a></li>
        <li><a href="https://mozillazg.com/category/firefox.html">firefox</a></li>
        <li><a href="https://mozillazg.com/category/flask.html">flask</a></li>
        <li><a href="https://mozillazg.com/category/git.html">git</a></li>
        <li><a href="https://mozillazg.com/category/go.html">go</a></li>
        <li><a href="https://mozillazg.com/category/javascript.html">javascript</a></li>
        <li><a href="https://mozillazg.com/category/linux.html">linux</a></li>
        <li><a href="https://mozillazg.com/category/mongodb.html">mongodb</a></li>
        <li><a href="https://mozillazg.com/category/others.html">others</a></li>
        <li><a href="https://mozillazg.com/category/peewee.html">peewee</a></li>
        <li><a href="https://mozillazg.com/category/python.html">python</a></li>
        <li><a href="https://mozillazg.com/category/reading.html">reading</a></li>
        <li><a href="https://mozillazg.com/category/tornado.html">tornado</a></li>
        <li><a href="https://mozillazg.com/category/web.html">web</a></li>
        <li><a href="https://mozillazg.com/category/windows.html">windows</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="https://mozillazg.com/tag/wsgi.html">wsgi</a>,    <a href="https://mozillazg.com/tag/zope2.html">zope2</a>,    <a href="https://mozillazg.com/tag/python-third-party-model.html">python-third-party-model</a>,    <a href="https://mozillazg.com/tag/pelican.html">pelican</a>,    <a href="https://mozillazg.com/tag/commitstrip.html">CommitStrip</a>,    <a href="https://mozillazg.com/tag/tiao-ban-ji.html">跳板机</a>,    <a href="https://mozillazg.com/tag/python-markdown.html">python-markdown</a>,    <a href="https://mozillazg.com/tag/datetime.html">datetime</a>,    <a href="https://mozillazg.com/tag/sanbox.html">sanbox</a>,    <a href="https://mozillazg.com/tag/vsftp.html">vsftp</a>,    <a href="https://mozillazg.com/tag/unicode.html">unicode</a>,    <a href="https://mozillazg.com/tag/mysql.html">mysql</a>,    <a href="https://mozillazg.com/tag/flask-restful.html">Flask-RESTful</a>,    <a href="https://mozillazg.com/tag/web.html">web</a>,    <a href="https://mozillazg.com/tag/generator.html">generator</a>,    <a href="https://mozillazg.com/tag/flask.html">flask</a>,    <a href="https://mozillazg.com/tag/psycopg2.html">psycopg2</a>,    <a href="https://mozillazg.com/tag/celery.html">celery</a>,    <a href="https://mozillazg.com/tag/sqldeveloper.html">sqldeveloper</a>,    <a href="https://mozillazg.com/tag/iptables.html">iptables</a>,    <a href="https://mozillazg.com/tag/python.html">python</a>,    <a href="https://mozillazg.com/tag/useradmin.html">UserAdmin</a>,    <a href="https://mozillazg.com/tag/framework.html">framework</a>,    <a href="https://mozillazg.com/tag/ssh.html">ssh</a>,    <a href="https://mozillazg.com/tag/fab.html">fab</a>,    <a href="https://mozillazg.com/tag/sorted.html">sorted</a>,    <a href="https://mozillazg.com/tag/zope.html">zope</a>,    <a href="https://mozillazg.com/tag/decorator.html">decorator</a>,    <a href="https://mozillazg.com/tag/sorting.html">sorting</a>,    <a href="https://mozillazg.com/tag/summernote.html">Summernote</a>,    <a href="https://mozillazg.com/tag/gitlab.html">gitlab</a>,    <a href="https://mozillazg.com/tag/list.html">list</a>,    <a href="https://mozillazg.com/tag/server.html">server</a>,    <a href="https://mozillazg.com/tag/mitmproxy.html">mitmproxy</a>,    <a href="https://mozillazg.com/tag/merge.html">merge</a>,    <a href="https://mozillazg.com/tag/rang-wo-men-qi-lai-gou-jian-ge-mo-ban-yin-qing.html">让我们一起来构建一个模板引擎</a>,    <a href="https://mozillazg.com/tag/lsbaws.html">lsbaws</a>,    <a href="https://mozillazg.com/tag/pdfjs.html">pdf.js</a>,    <a href="https://mozillazg.com/tag/multiprocessing.html">multiprocessing</a>,    <a href="https://mozillazg.com/tag/list_display.html">list_display</a>,    <a href="https://mozillazg.com/tag/postpresql.html">postpresql</a>,    <a href="https://mozillazg.com/tag/centos.html">centos</a>,    <a href="https://mozillazg.com/tag/zhong-wen-fan-yi.html">中文翻译</a>,    <a href="https://mozillazg.com/tag/yi-dong-duan-kai-fa.html">移动端开发</a>,    <a href="https://mozillazg.com/tag/auto-increment.html">auto-increment</a>,    <a href="https://mozillazg.com/tag/vmware.html">VMware</a>,    <a href="https://mozillazg.com/tag/dateutil.html">dateutil</a>,    <a href="https://mozillazg.com/tag/querydict.html">querydict</a>,    <a href="https://mozillazg.com/tag/replication.html">replication</a>,    <a href="https://mozillazg.com/tag/python-3.html">python 3</a>,    <a href="https://mozillazg.com/tag/template.html">template</a>,    <a href="https://mozillazg.com/tag/foreign-key.html">foreign-key</a>,    <a href="https://mozillazg.com/tag/memcached.html">memcached</a>,    <a href="https://mozillazg.com/tag/email.html">email</a>,    <a href="https://mozillazg.com/tag/wireshark.html">wireshark</a>,    <a href="https://mozillazg.com/tag/weinre.html">weinre</a>,    <a href="https://mozillazg.com/tag/gunicorn.html">gunicorn</a>,    <a href="https://mozillazg.com/tag/sendmail.html">sendmail</a>,    <a href="https://mozillazg.com/tag/web-quan-zhan-gong-cheng-shi-de-zi-wo-xiu-yang.html">Web 全栈工程师的自我修养</a>,    <a href="https://mozillazg.com/tag/screen.html">screen</a>,    <a href="https://mozillazg.com/tag/javascript.html">javascript</a>,    <a href="https://mozillazg.com/tag/orm.html">orm</a>,    <a href="https://mozillazg.com/tag/ubuntu.html">ubuntu</a>,    <a href="https://mozillazg.com/tag/apache.html">apache</a>,    <a href="https://mozillazg.com/tag/bash.html">bash</a>,    <a href="https://mozillazg.com/tag/postgresql.html">postgresql</a>,    <a href="https://mozillazg.com/tag/socket.html">socket</a>,    <a href="https://mozillazg.com/tag/cyanide-and-happiness.html">Cyanide and Happiness</a>,    <a href="https://mozillazg.com/tag/admin.html">admin</a>,    <a href="https://mozillazg.com/tag/rang-wo-men-qi-lai-gou-jian-ge-web-fu-wu-qi.html">让我们一起来构建一个 Web 服务器</a>,    <a href="https://mozillazg.com/tag/jwt.html">jwt</a>,    <a href="https://mozillazg.com/tag/django-rq.html">django-rq</a>,    <a href="https://mozillazg.com/tag/yum.html">yum</a>,    <a href="https://mozillazg.com/tag/thread-locals.html">Thread-Locals</a>,    <a href="https://mozillazg.com/tag/router.html">router</a>,    <a href="https://mozillazg.com/tag/wei-xin.html">微信</a>,    <a href="https://mozillazg.com/tag/pillow.html">pillow</a>,    <a href="https://mozillazg.com/tag/south.html">south</a>,    <a href="https://mozillazg.com/tag/phpmyadmin.html">phpmyadmin</a>,    <a href="https://mozillazg.com/tag/markdown.html">markdown</a>,    <a href="https://mozillazg.com/tag/firefox.html">firefox</a>,    <a href="https://mozillazg.com/tag/color.html">color</a>,    <a href="https://mozillazg.com/tag/gitlab-git-http-server.html">gitlab-git-http-server</a>,    <a href="https://mozillazg.com/tag/search_fields.html">search_fields</a>,    <a href="https://mozillazg.com/tag/pygments.html">pygments</a>,    <a href="https://mozillazg.com/tag/linux.html">linux</a>,    <a href="https://mozillazg.com/tag/gateway.html">gateway</a>,    <a href="https://mozillazg.com/tag/terminal.html">terminal</a>,    <a href="https://mozillazg.com/tag/git.html">git</a>,    <a href="https://mozillazg.com/tag/fabric.html">fabric</a>,    <a href="https://mozillazg.com/tag/flask-sqlalchemy.html">flask-sqlalchemy</a>,    <a href="https://mozillazg.com/tag/buttersafe.html">buttersafe</a>,    <a href="https://mozillazg.com/tag/rpmforge.html">rpmforge</a>,    <a href="https://mozillazg.com/tag/redmine.html">redmine</a>,    <a href="https://mozillazg.com/tag/mongodbshu-ju-ku.html">MongoDB，数据库</a>,    <a href="https://mozillazg.com/tag/tcpdump.html">tcpdump</a>,    <a href="https://mozillazg.com/tag/valueerror.html">ValueError</a>,    <a href="https://mozillazg.com/tag/fastcgi.html">fastcgi</a>,    <a href="https://mozillazg.com/tag/sort.html">sort</a>,    <a href="https://mozillazg.com/tag/shell.html">shell</a>,    <a href="https://mozillazg.com/tag/form.html">form</a>,    <a href="https://mozillazg.com/tag/pinyin.html">pinyin</a>,    <a href="https://mozillazg.com/tag/goroutine.html">goroutine</a>,    <a href="https://mozillazg.com/tag/man-hua.html">漫画</a>,    <a href="https://mozillazg.com/tag/explosmnet.html">Explosm.net</a>,    <a href="https://mozillazg.com/tag/python-dateutil.html">python-dateutil</a>,    <a href="https://mozillazg.com/tag/lsbate.html">lsbate</a>,    <a href="https://mozillazg.com/tag/psql.html">psql</a>,    <a href="https://mozillazg.com/tag/thread.html">thread</a>,    <a href="https://mozillazg.com/tag/x-priority.html">X-Priority</a>,    <a href="https://mozillazg.com/tag/comics.html">comics</a>,    <a href="https://mozillazg.com/tag/verbose_name_plural.html">verbose_name_plural</a>,    <a href="https://mozillazg.com/tag/function-annotations.html">Function Annotations</a>,    <a href="https://mozillazg.com/tag/tu-jie-http.html">图解 HTTP</a>,    <a href="https://mozillazg.com/tag/berkeley-mews.html">Berkeley Mews</a>,    <a href="https://mozillazg.com/tag/fork.html">fork</a>,    <a href="https://mozillazg.com/tag/pil.html">pil</a>,    <a href="https://mozillazg.com/tag/ying-yu.html">英语</a>,    <a href="https://mozillazg.com/tag/queryset.html">queryset</a>,    <a href="https://mozillazg.com/tag/libxml.html">libxml</a>,    <a href="https://mozillazg.com/tag/sqlalchemy.html">sqlalchemy</a>,    <a href="https://mozillazg.com/tag/libxslt.html">libxslt</a>,    <a href="https://mozillazg.com/tag/bigintegerfield.html">BigIntegerField</a>,    <a href="https://mozillazg.com/tag/vps.html">vps</a>,    <a href="https://mozillazg.com/tag/threading.html">threading</a>,    <a href="https://mozillazg.com/tag/excel.html">excel</a>,    <a href="https://mozillazg.com/tag/flotr2.html">flotr2</a>,    <a href="https://mozillazg.com/tag/tubeytoons.html">Tubeytoons</a>,    <a href="https://mozillazg.com/tag/csv.html">csv</a>,    <a href="https://mozillazg.com/tag/verbose_name.html">verbose_name</a>,    <a href="https://mozillazg.com/tag/mod_wsgi.html">mod_wsgi</a>,    <a href="https://mozillazg.com/tag/http.html">http</a>,    <a href="https://mozillazg.com/tag/exec.html">exec</a>,    <a href="https://mozillazg.com/tag/yi-hua.html">汉化</a>,    <a href="https://mozillazg.com/tag/victims-of-circumsolar.html">Victims of Circumsolar</a>,    <a href="https://mozillazg.com/tag/ansi.html">ansi</a>,    <a href="https://mozillazg.com/tag/lxml.html">lxml</a>,    <a href="https://mozillazg.com/tag/wechat.html">wechat</a>,    <a href="https://mozillazg.com/tag/cygwin.html">Cygwin</a>,    <a href="https://mozillazg.com/tag/zhuang-shi-qi.html">装饰器</a>,    <a href="https://mozillazg.com/tag/loading-artist.html">Loading Artist</a>,    <a href="https://mozillazg.com/tag/rq.html">rq</a>,    <a href="https://mozillazg.com/tag/argparse.html">argparse</a>,    <a href="https://mozillazg.com/tag/github.html">github</a>,    <a href="https://mozillazg.com/tag/high-performance-django.html">High Performance Django</a>,    <a href="https://mozillazg.com/tag/nginx.html">nginx</a>,    <a href="https://mozillazg.com/tag/windows.html">windows</a>,    <a href="https://mozillazg.com/tag/django.html">django</a>,    <a href="https://mozillazg.com/tag/alembic.html">alembic</a>,    <a href="https://mozillazg.com/tag/english.html">english</a>,    <a href="https://mozillazg.com/tag/send_mail.html">send_mail</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://github.com/mozillazg" target="_blank">Fork me on GitHub</a></li>
            <li><a href="https://comic.mozillazg.com" target="_blank">Comics</a></li>
            <li><a href="https://mozillazg.com/feeds/all.atom.xml" target="_blank">Atom Feed</a></li>
            <li><a href="https://mozillazg.com/feeds/all.rss.xml" target="_blank">RSS Feed</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://docs.notmyidea.org/alexis/pelican/" target="_blank">Pelican</a></li>
            <li><a href="http://python.org" target="_blank">Python.org</a></li>
            <li><a href="http://jinja.pocoo.org" target="_blank">Jinja2</a></li>
        </ul>
    </section>

<section>
    <p>Follow <a href="http://twitter.com/mozillazg">@mozillazg</a></p>
</section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2013-2016  - mozillazg -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
	<script type="text/javascript">
	  var disqus_shortname = 'my-github-blog';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>